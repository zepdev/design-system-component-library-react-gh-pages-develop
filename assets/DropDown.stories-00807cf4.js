import{r as d,R as p}from"./index-8db94870.js";import{c as k}from"./clsx.m-1229b3e0.js";import{F as W}from"./Icon-a1e3a7f8.js";import{o as v,S as ae,D as A,y as B,T as Oe,u as C,l as j,H as Re,h as Se,a as Le,p as G,c as De,d as K,e as we,b as Ee,f as Ie,R as Te,X as V,I as X,i as ce,s as ke,C as $e,g as Ce,j as Pe,k as Fe,m as w,n as O,r as Ne,q as Z,x as Me,t as Ae,v as Be,$ as Ve}from"./transition-729c66c8.js";import{t as qe}from"./tw-merge-b02e8c47.js";import{S as He}from"./Spacing-2c30780b.js";import"./_commonjsHelpers-042e6b4d.js";let le=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function ie(e){var r,a;let n=(r=e.innerText)!=null?r:"",l=e.cloneNode(!0);if(!(l instanceof HTMLElement))return n;let i=!1;for(let s of l.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))s.remove(),i=!0;let t=i?(a=l.innerText)!=null?a:"":n;return le.test(t)&&(t=t.replace(le,"")),t}function _e(e){let r=e.getAttribute("aria-label");if(typeof r=="string")return r.trim();let a=e.getAttribute("aria-labelledby");if(a){let n=a.split(" ").map(l=>{let i=document.getElementById(l);if(i){let t=i.getAttribute("aria-label");return typeof t=="string"?t.trim():ie(i).trim()}return null}).filter(Boolean);if(n.length>0)return n.join(", ")}return ie(e).trim()}function Qe(e){let r=d.useRef(""),a=d.useRef("");return v(()=>{let n=e.current;if(!n)return"";let l=n.innerText;if(r.current===l)return a.current;let i=_e(n).trim().toLowerCase();return r.current=l,a.current=i,i})}var Ue=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Ue||{}),je=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(je||{}),Ge=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Ge||{}),Ke=(e=>(e[e.OpenListbox=0]="OpenListbox",e[e.CloseListbox=1]="CloseListbox",e[e.GoToOption=2]="GoToOption",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterOption=5]="RegisterOption",e[e.UnregisterOption=6]="UnregisterOption",e[e.RegisterLabel=7]="RegisterLabel",e))(Ke||{});function Y(e,r=a=>a){let a=e.activeOptionIndex!==null?e.options[e.activeOptionIndex]:null,n=Ae(r(e.options.slice()),i=>i.dataRef.current.domRef.current),l=a?n.indexOf(a):null;return l===-1&&(l=null),{options:n,activeOptionIndex:l}}let Xe={[1](e){return e.dataRef.current.disabled||e.listboxState===1?e:{...e,activeOptionIndex:null,listboxState:1}},[0](e){if(e.dataRef.current.disabled||e.listboxState===0)return e;let r=e.activeOptionIndex,{isSelected:a}=e.dataRef.current,n=e.options.findIndex(l=>a(l.dataRef.current.value));return n!==-1&&(r=n),{...e,listboxState:0,activeOptionIndex:r}},[2](e,r){var a;if(e.dataRef.current.disabled||e.listboxState===1)return e;let n=Y(e),l=Me(r,{resolveItems:()=>n.options,resolveActiveIndex:()=>n.activeOptionIndex,resolveId:i=>i.id,resolveDisabled:i=>i.dataRef.current.disabled});return{...e,...n,searchQuery:"",activeOptionIndex:l,activationTrigger:(a=r.trigger)!=null?a:1}},[3]:(e,r)=>{if(e.dataRef.current.disabled||e.listboxState===1)return e;let a=e.searchQuery!==""?0:1,n=e.searchQuery+r.value.toLowerCase(),l=(e.activeOptionIndex!==null?e.options.slice(e.activeOptionIndex+a).concat(e.options.slice(0,e.activeOptionIndex+a)):e.options).find(t=>{var s;return!t.dataRef.current.disabled&&((s=t.dataRef.current.textValue)==null?void 0:s.startsWith(n))}),i=l?e.options.indexOf(l):-1;return i===-1||i===e.activeOptionIndex?{...e,searchQuery:n}:{...e,searchQuery:n,activeOptionIndex:i,activationTrigger:1}},[4](e){return e.dataRef.current.disabled||e.listboxState===1||e.searchQuery===""?e:{...e,searchQuery:""}},[5]:(e,r)=>{let a={id:r.id,dataRef:r.dataRef},n=Y(e,l=>[...l,a]);return e.activeOptionIndex===null&&e.dataRef.current.isSelected(r.dataRef.current.value)&&(n.activeOptionIndex=n.options.indexOf(a)),{...e,...n}},[6]:(e,r)=>{let a=Y(e,n=>{let l=n.findIndex(i=>i.id===r.id);return l!==-1&&n.splice(l,1),n});return{...e,...a,activationTrigger:1}},[7]:(e,r)=>({...e,labelId:r.id})},te=d.createContext(null);te.displayName="ListboxActionsContext";function q(e){let r=d.useContext(te);if(r===null){let a=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(a,q),a}return r}let ne=d.createContext(null);ne.displayName="ListboxDataContext";function H(e){let r=d.useContext(ne);if(r===null){let a=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(a,H),a}return r}function Je(e,r){return C(r.type,Xe,e,r)}let We=d.Fragment;function Ye(e,r){let{value:a,defaultValue:n,form:l,name:i,onChange:t,by:s=(u,m)=>u===m,disabled:c=!1,horizontal:g=!1,multiple:z=!1,...S}=e;const E=g?"horizontal":"vertical";let R=B(r),[y=z?[]:void 0,D]=Oe(a,t,n),[x,o]=d.useReducer(Je,{dataRef:d.createRef(),listboxState:1,options:[],searchQuery:"",labelId:null,activeOptionIndex:null,activationTrigger:1}),b=d.useRef({static:!1,hold:!1}),I=d.useRef(null),$=d.useRef(null),P=d.useRef(null),h=v(typeof s=="string"?(u,m)=>{let L=s;return(u==null?void 0:u[L])===(m==null?void 0:m[L])}:s),T=d.useCallback(u=>C(f.mode,{[1]:()=>y.some(m=>h(m,u)),[0]:()=>h(y,u)}),[y]),f=d.useMemo(()=>({...x,value:y,disabled:c,mode:z?1:0,orientation:E,compare:h,isSelected:T,optionsPropsRef:b,labelRef:I,buttonRef:$,optionsRef:P}),[y,c,z,x]);j(()=>{x.dataRef.current=f},[f]),Re([f.buttonRef,f.optionsRef],(u,m)=>{var L;o({type:1}),Se(m,Le.Loose)||(u.preventDefault(),(L=f.buttonRef.current)==null||L.focus())},f.listboxState===0);let re=d.useMemo(()=>({open:f.listboxState===0,disabled:c,value:y}),[f,c,y]),F=v(u=>{let m=f.options.find(L=>L.id===u);m&&N(m.dataRef.current.value)}),J=v(()=>{if(f.activeOptionIndex!==null){let{dataRef:u,id:m}=f.options[f.activeOptionIndex];N(u.current.value),o({type:2,focus:w.Specific,id:m})}}),de=v(()=>o({type:0})),fe=v(()=>o({type:1})),me=v((u,m,L)=>u===w.Specific?o({type:2,focus:w.Specific,id:m,trigger:L}):o({type:2,focus:u,trigger:L})),be=v((u,m)=>(o({type:5,id:u,dataRef:m}),()=>o({type:6,id:u}))),ve=v(u=>(o({type:7,id:u}),()=>o({type:7,id:null}))),N=v(u=>C(f.mode,{[0](){return D==null?void 0:D(u)},[1](){let m=f.value.slice(),L=m.findIndex(Q=>h(Q,u));return L===-1?m.push(u):m.splice(L,1),D==null?void 0:D(m)}})),xe=v(u=>o({type:3,value:u})),ge=v(()=>o({type:4})),ze=d.useMemo(()=>({onChange:N,registerOption:be,registerLabel:ve,goToOption:me,closeListbox:fe,openListbox:de,selectActiveOption:J,selectOption:F,search:xe,clearSearch:ge}),[]),ye={ref:R},_=d.useRef(null),he=G();return d.useEffect(()=>{_.current&&n!==void 0&&he.addEventListener(_.current,"reset",()=>{N(n)})},[_,N]),p.createElement(te.Provider,{value:ze},p.createElement(ne.Provider,{value:f},p.createElement(De,{value:C(f.listboxState,{[0]:K.Open,[1]:K.Closed})},i!=null&&y!=null&&we({[i]:y}).map(([u,m],L)=>p.createElement(Ee,{features:Ie.Hidden,ref:L===0?Q=>{var oe;_.current=(oe=Q==null?void 0:Q.closest("form"))!=null?oe:null}:void 0,...Te({key:u,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:l,name:u,value:m})})),V({ourProps:ye,theirProps:S,slot:re,defaultTag:We,name:"Listbox"}))))}let Ze="button";function et(e,r){var a;let n=X(),{id:l=`headlessui-listbox-button-${n}`,...i}=e,t=H("Listbox.Button"),s=q("Listbox.Button"),c=B(t.buttonRef,r),g=G(),z=v(x=>{switch(x.key){case O.Space:case O.Enter:case O.ArrowDown:x.preventDefault(),s.openListbox(),g.nextFrame(()=>{t.value||s.goToOption(w.First)});break;case O.ArrowUp:x.preventDefault(),s.openListbox(),g.nextFrame(()=>{t.value||s.goToOption(w.Last)});break}}),S=v(x=>{switch(x.key){case O.Space:x.preventDefault();break}}),E=v(x=>{if(Ne(x.currentTarget))return x.preventDefault();t.listboxState===0?(s.closeListbox(),g.nextFrame(()=>{var o;return(o=t.buttonRef.current)==null?void 0:o.focus({preventScroll:!0})})):(x.preventDefault(),s.openListbox())}),R=ce(()=>{if(t.labelId)return[t.labelId,l].join(" ")},[t.labelId,l]),y=d.useMemo(()=>({open:t.listboxState===0,disabled:t.disabled,value:t.value}),[t]),D={ref:c,id:l,type:ke(e,t.buttonRef),"aria-haspopup":"listbox","aria-controls":(a=t.optionsRef.current)==null?void 0:a.id,"aria-expanded":t.disabled?void 0:t.listboxState===0,"aria-labelledby":R,disabled:t.disabled,onKeyDown:z,onKeyUp:S,onClick:E};return V({ourProps:D,theirProps:i,slot:y,defaultTag:Ze,name:"Listbox.Button"})}let tt="label";function nt(e,r){let a=X(),{id:n=`headlessui-listbox-label-${a}`,...l}=e,i=H("Listbox.Label"),t=q("Listbox.Label"),s=B(i.labelRef,r);j(()=>t.registerLabel(n),[n]);let c=v(()=>{var z;return(z=i.buttonRef.current)==null?void 0:z.focus({preventScroll:!0})}),g=d.useMemo(()=>({open:i.listboxState===0,disabled:i.disabled}),[i]);return V({ourProps:{ref:s,id:n,onClick:c},theirProps:l,slot:g,defaultTag:tt,name:"Listbox.Label"})}let rt="ul",ot=ae.RenderStrategy|ae.Static;function at(e,r){var a;let n=X(),{id:l=`headlessui-listbox-options-${n}`,...i}=e,t=H("Listbox.Options"),s=q("Listbox.Options"),c=B(t.optionsRef,r),g=G(),z=G(),S=$e(),E=(()=>S!==null?(S&K.Open)===K.Open:t.listboxState===0)();d.useEffect(()=>{var o;let b=t.optionsRef.current;b&&t.listboxState===0&&b!==((o=Ce(b))==null?void 0:o.activeElement)&&b.focus({preventScroll:!0})},[t.listboxState,t.optionsRef]);let R=v(o=>{switch(z.dispose(),o.key){case O.Space:if(t.searchQuery!=="")return o.preventDefault(),o.stopPropagation(),s.search(o.key);case O.Enter:if(o.preventDefault(),o.stopPropagation(),t.activeOptionIndex!==null){let{dataRef:b}=t.options[t.activeOptionIndex];s.onChange(b.current.value)}t.mode===0&&(s.closeListbox(),Z().nextFrame(()=>{var b;return(b=t.buttonRef.current)==null?void 0:b.focus({preventScroll:!0})}));break;case C(t.orientation,{vertical:O.ArrowDown,horizontal:O.ArrowRight}):return o.preventDefault(),o.stopPropagation(),s.goToOption(w.Next);case C(t.orientation,{vertical:O.ArrowUp,horizontal:O.ArrowLeft}):return o.preventDefault(),o.stopPropagation(),s.goToOption(w.Previous);case O.Home:case O.PageUp:return o.preventDefault(),o.stopPropagation(),s.goToOption(w.First);case O.End:case O.PageDown:return o.preventDefault(),o.stopPropagation(),s.goToOption(w.Last);case O.Escape:return o.preventDefault(),o.stopPropagation(),s.closeListbox(),g.nextFrame(()=>{var b;return(b=t.buttonRef.current)==null?void 0:b.focus({preventScroll:!0})});case O.Tab:o.preventDefault(),o.stopPropagation();break;default:o.key.length===1&&(s.search(o.key),z.setTimeout(()=>s.clearSearch(),350));break}}),y=ce(()=>{var o,b,I;return(I=(o=t.labelRef.current)==null?void 0:o.id)!=null?I:(b=t.buttonRef.current)==null?void 0:b.id},[t.labelRef.current,t.buttonRef.current]),D=d.useMemo(()=>({open:t.listboxState===0}),[t]),x={"aria-activedescendant":t.activeOptionIndex===null||(a=t.options[t.activeOptionIndex])==null?void 0:a.id,"aria-multiselectable":t.mode===1?!0:void 0,"aria-labelledby":y,"aria-orientation":t.orientation,id:l,onKeyDown:R,role:"listbox",tabIndex:0,ref:c};return V({ourProps:x,theirProps:i,slot:D,defaultTag:rt,features:ot,visible:E,name:"Listbox.Options"})}let lt="li";function it(e,r){let a=X(),{id:n=`headlessui-listbox-option-${a}`,disabled:l=!1,value:i,...t}=e,s=H("Listbox.Option"),c=q("Listbox.Option"),g=s.activeOptionIndex!==null?s.options[s.activeOptionIndex].id===n:!1,z=s.isSelected(i),S=d.useRef(null),E=Qe(S),R=Pe({disabled:l,value:i,domRef:S,get textValue(){return E()}}),y=B(r,S);j(()=>{if(s.listboxState!==0||!g||s.activationTrigger===0)return;let h=Z();return h.requestAnimationFrame(()=>{var T,f;(f=(T=S.current)==null?void 0:T.scrollIntoView)==null||f.call(T,{block:"nearest"})}),h.dispose},[S,g,s.listboxState,s.activationTrigger,s.activeOptionIndex]),j(()=>c.registerOption(n,R),[R,n]);let D=v(h=>{if(l)return h.preventDefault();c.onChange(i),s.mode===0&&(c.closeListbox(),Z().nextFrame(()=>{var T;return(T=s.buttonRef.current)==null?void 0:T.focus({preventScroll:!0})}))}),x=v(()=>{if(l)return c.goToOption(w.Nothing);c.goToOption(w.Specific,n)}),o=Fe(),b=v(h=>o.update(h)),I=v(h=>{o.wasMoved(h)&&(l||g||c.goToOption(w.Specific,n,0))}),$=v(h=>{o.wasMoved(h)&&(l||g&&c.goToOption(w.Nothing))}),P=d.useMemo(()=>({active:g,selected:z,disabled:l}),[g,z,l]);return V({ourProps:{id:n,ref:y,role:"option",tabIndex:l===!0?void 0:-1,"aria-disabled":l===!0?!0:void 0,"aria-selected":z,disabled:void 0,onClick:D,onFocus:x,onPointerEnter:b,onMouseEnter:b,onPointerMove:I,onMouseMove:I,onPointerLeave:$,onMouseLeave:$},theirProps:t,slot:P,defaultTag:lt,name:"Listbox.Option"})}let st=A(Ye),ut=A(et),pt=A(nt),ct=A(at),dt=A(it),M=Object.assign(st,{Button:ut,Label:pt,Options:ct,Option:dt});const ft=268,mt=(e,r)=>k("zep-flex zep-w-full zep-items-center zep-justify-between zep-bg-background-light zep-px-1 zep-py-0.75",{"zep-bg-background-medium":e},{"zep-bg-background-medium":r},{"zep-pr-3":r}),ee=({disabled:e=!1,items:r,message:a,label:n,placeholder:l,readOnly:i=!1,state:t="default",...s})=>{const[c,g]=p.useState(),z=p.useRef(null),S=p.useRef(null),E=t==="error",R=e||i,y=E?"zep-text-error":t==="info"?"zep-text-info":"";return p.createElement("div",{className:qe(k("zep-relative","zep-inline-block","zep-text-left","zep-w-full",{"zep-cursor-not-allowed zep-opacity-disabled":e}),s.className),"data-testid":"zep-drop-down"},p.createElement(M,{disabled:R,value:c,onChange:g},({open:D})=>{const o=Be(S.current)<ft,b=i?void 0:l,I=(c==null?void 0:c.name)||b,$=e?"zep-text-opacity-disabled":!(c!=null&&c.name)&&!i?"zep-text-typography-dark-100 zep-opacity-70":"zep-text-typography-dark-100",P=k("zep-inline-flex","zep-justify-between","zep-rounded-4","zep-border-solid","zep-pl-1","zep-pr-0.75","zep-py-0.75","zep-font-roboto","zep-w-full","zep-outline-none",E?"zep-border-2":"zep-border-1",$,{"zep-bg-background-medium":i},{"zep-ring":D},{"zep-border-error":E},{"zep-active:ring":!R},{"zep-ring-offset-1":!R},{"focus-visible:zep-ring":!R},{"zep-ring-focus":!R},{"zep-cursor-not-allowed":R}),h=k("zep-absolute","zep-drop-shadow-sm","zep-py-0.25","zep-z-10","zep-w-full","zep-max-h-[268px]","zep-origin-top-right","zep-rounded-4","zep-bg-background-light","zep-drop-shadow-sm","focus:outline-none","zep-overflow-hidden","zep-overflow-y-auto",o?"zep-mb-[-25px]":"zep-mt-0.25",{"zep-bottom-full":o}),T=k(R?"zep-text-opacity-disabled":"zep-text-typography-dark-100","zep-transition-transform","zep-duration-500","zep-shrink-0",{"zep-rotate-180":D});return p.createElement(p.Fragment,null,n&&p.createElement(M.Label,{className:k("zep-block","zep-mb-0.5",{"zep-text-opacity-disabled":e})},n),p.createElement(M.Button,{className:P,ref:S,title:I,"data-testid":"zep-drop-down-button"},p.createElement(p.Fragment,null,p.createElement("span",{className:"zep-truncate"},I),p.createElement(W,{className:T,name:"chevron-mini-down",role:"img",size:24}))),p.createElement(Ve,{as:d.Fragment,enter:"zep-transition zep-ease-out zep-duration-100",enterFrom:"zep-transform zep-opacity-0 zep-scale-95",enterTo:"zep-transform zep-opacity-100 zep-scale-100",leave:"zep-transition zep-ease-in zep-duration-25",leaveFrom:"zep-transform zep-opacity-100 zep-scale-100",leaveTo:"zep-transform zep-opacity-0 zep-scale-95"},p.createElement(M.Options,{className:h,ref:z,"data-testid":"zep-drop-down-menu"},r.map((f,re)=>p.createElement(M.Option,{key:f.id,value:f,title:f.name,className:({active:F,selected:J})=>mt(F,J)},({selected:F})=>p.createElement(p.Fragment,null,p.createElement("span",{className:"zep-truncate"},f.name),F&&p.createElement(W,{name:"check",role:"img",size:24,className:"zep-absolute zep-right-1"})))))))}),a&&p.createElement("div",{className:k("zep-mt-[6px]","zep-text-typography-dark-100 zep-opacity-70","zep-text-0.875","zep-flex","zep-items-center",y)},t!=="default"&&p.createElement(W,{name:"info-circle-filled",role:"img",size:24,className:"zep-mr-0.5"}),p.createElement("span",null,a)))};try{ee.displayName="DropDown",ee.__docgenInfo={description:"",displayName:"DropDown",props:{disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},items:{defaultValue:null,description:"",name:"items",required:!0,type:{name:"DropDownItem[]"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},message:{defaultValue:null,description:"",name:"message",required:!1,type:{name:"string"}},readOnly:{defaultValue:{value:"false"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},state:{defaultValue:{value:"default"},description:"",name:"state",required:!1,type:{name:"enum",value:[{value:'"error"'},{value:'"default"'},{value:'"info"'}]}}}}}catch{}const bt=[{id:1,name:"Navigation link"},{id:2,name:"Clickable action"},{id:3,name:"Archive"},{id:4,name:"Here is a really long text that should be truncated"},{id:5,name:"Duplicate"},{id:6,name:"License"},{id:7,name:"Move"},{id:8,name:"Sign out"}],Rt={title:"Components/DropDown Select",component:ee,tags:["autodocs"],argTypes:{disabled:{control:{type:"boolean"}},label:{control:{type:"text"}},message:{control:{type:"text"}},readOnly:{control:{type:"boolean"}}},decorators:[e=>p.createElement(He,{className:"zep-w-[326px]"},p.createElement(e,null))]},U={args:{disabled:!1,readOnly:!0,items:bt,label:"Dropdown",className:"foo",state:"default",placeholder:"Auswählen (Hint)"}};var se,ue,pe;U.parameters={...U.parameters,docs:{...(se=U.parameters)==null?void 0:se.docs,source:{originalSource:`{
  args: ({
    disabled: false,
    readOnly: true,
    items,
    label: 'Dropdown',
    className: 'foo',
    state: 'default',
    placeholder: 'Auswählen (Hint)'
  } as DropDownProps)
}`,...(pe=(ue=U.parameters)==null?void 0:ue.docs)==null?void 0:pe.source}}};const St=["Default"];export{U as Default,St as __namedExportsOrder,Rt as default};
//# sourceMappingURL=DropDown.stories-00807cf4.js.map
