import{j as D,c as ee}from"./clsx-24df0f47.js";import{w as Ye,e as Q,u as A}from"./index-f872ea10.js";import{r as f,R as $}from"./index-b1e7e93e.js";import{g as ct}from"./getDistanceToBottom-7ac1525d.js";import{F as ye}from"./Icon-7f566523.js";import{t as ut}from"./tw-merge-1166cefb.js";import{s as Qe,a as R,g as Je,n as ne,l as dt,u as ue,A as Me,Y as ge,c as ve,K as xe,y as ze,p as pt,$ as Ze,b as et,V as Ce,w as mt,d as ht,f as U,o as ft}from"./use-resolve-button-type-94c7ded6.js";import{r as re}from"./index-95b1c596.js";import{T as bt,x as tt,a as gt,p as vt,b as fe,d as xt,c as B,f as Ne,e as wt,u as yt,S as L,g as Et,A as St,F as Ot,L as zt,i as he,s as Dt,y as It,R as Ct,q as Tt,j as Fe,l as kt,m as Mt,n as Nt,w as Re,o as $e,t as Ft,v as Rt,r as $t,z as Pt,B as At}from"./element-movement-58e80a5a.js";import{Z as Vt,a as _t,l as jt,b as Bt,V as Lt,j as Ht,u as Wt,N as Te,w as qt}from"./label-f3d21b53.js";import{l as Pe,i as Ut,n as Kt}from"./bugs-4f2627ab.js";import{c as Gt,i as Oe,u as Xt,N as Yt,x as Qt}from"./open-closed-841e53a0.js";import{E as Jt,G as Zt}from"./focus-management-0a97bdb0.js";import{S as en}from"./Spacing-e25630db.js";import"./_commonjsHelpers-de833af9.js";import"./index-03bbf7d1.js";import"./_baseIsEqual-cf90f23b.js";import"./index-356e4a49.js";import"./hidden-7c25fc18.js";import"./index-b7fee60d.js";function ce(t,i,e){let o=e.initialDeps??[],n,s=!0;function a(){var r,c,l;let u;e.key&&((r=e.debug)!=null&&r.call(e))&&(u=Date.now());const g=t();if(!(g.length!==o.length||g.some((p,b)=>o[b]!==p)))return n;o=g;let m;if(e.key&&((c=e.debug)!=null&&c.call(e))&&(m=Date.now()),n=i(...g),e.key&&((l=e.debug)!=null&&l.call(e))){const p=Math.round((Date.now()-u)*100)/100,b=Math.round((Date.now()-m)*100)/100,x=b/16,C=(y,T)=>{for(y=String(y);y.length<T;)y=" "+y;return y};console.info(`%câ± ${C(b,5)} /${C(p,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*x,120))}deg 100% 31%);`,e==null?void 0:e.key)}return e!=null&&e.onChange&&!(s&&e.skipInitialOnChange)&&e.onChange(n),s=!1,n}return a.updateDeps=r=>{o=r},a}function Ae(t,i){if(t===void 0)throw new Error(`Unexpected undefined${i?`: ${i}`:""}`);return t}const tn=(t,i)=>Math.abs(t-i)<1.01,nn=(t,i,e)=>{let o;return function(...n){t.clearTimeout(o),o=t.setTimeout(()=>i.apply(this,n),e)}},Ve=t=>{const{offsetWidth:i,offsetHeight:e}=t;return{width:i,height:e}},on=t=>t,sn=t=>{const i=Math.max(t.startIndex-t.overscan,0),e=Math.min(t.endIndex+t.overscan,t.count-1),o=[];for(let n=i;n<=e;n++)o.push(n);return o},an=(t,i)=>{const e=t.scrollElement;if(!e)return;const o=t.targetWindow;if(!o)return;const n=a=>{const{width:r,height:c}=a;i({width:Math.round(r),height:Math.round(c)})};if(n(Ve(e)),!o.ResizeObserver)return()=>{};const s=new o.ResizeObserver(a=>{const r=()=>{const c=a[0];if(c!=null&&c.borderBoxSize){const l=c.borderBoxSize[0];if(l){n({width:l.inlineSize,height:l.blockSize});return}}n(Ve(e))};t.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(r):r()});return s.observe(e,{box:"border-box"}),()=>{s.unobserve(e)}},_e={passive:!0},je=typeof window>"u"?!0:"onscrollend"in window,rn=(t,i)=>{const e=t.scrollElement;if(!e)return;const o=t.targetWindow;if(!o)return;let n=0;const s=t.options.useScrollendEvent&&je?()=>{}:nn(o,()=>{i(n,!1)},t.options.isScrollingResetDelay),a=u=>()=>{const{horizontal:g,isRtl:d}=t.options;n=g?e.scrollLeft*(d&&-1||1):e.scrollTop,s(),i(n,u)},r=a(!0),c=a(!1);e.addEventListener("scroll",r,_e);const l=t.options.useScrollendEvent&&je;return l&&e.addEventListener("scrollend",c,_e),()=>{e.removeEventListener("scroll",r),l&&e.removeEventListener("scrollend",c)}},ln=(t,i,e)=>{if(i!=null&&i.borderBoxSize){const o=i.borderBoxSize[0];if(o)return Math.round(o[e.options.horizontal?"inlineSize":"blockSize"])}return t[e.options.horizontal?"offsetWidth":"offsetHeight"]},cn=(t,{adjustments:i=0,behavior:e},o)=>{var n,s;const a=t+i;(s=(n=o.scrollElement)==null?void 0:n.scrollTo)==null||s.call(n,{[o.options.horizontal?"left":"top"]:a,behavior:e})};class un{constructor(i){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.currentScrollToIndex=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let e=null;const o=()=>e||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:e=new this.targetWindow.ResizeObserver(n=>{n.forEach(s=>{const a=()=>{this._measureElement(s.target,s)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(a):a()})}));return{disconnect:()=>{var n;(n=o())==null||n.disconnect(),e=null},observe:n=>{var s;return(s=o())==null?void 0:s.observe(n,{box:"border-box"})},unobserve:n=>{var s;return(s=o())==null?void 0:s.unobserve(n)}}})(),this.range=null,this.setOptions=e=>{Object.entries(e).forEach(([o,n])=>{typeof n>"u"&&delete e[o]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:on,rangeExtractor:sn,onChange:()=>{},measureElement:ln,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...e}},this.notify=e=>{var o,n;(n=(o=this.options).onChange)==null||n.call(o,this,e)},this.maybeNotify=ce(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),e=>{this.notify(e)},{key:"maybeNotify",debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(e=>e()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var e;const o=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==o){if(this.cleanup(),!o){this.maybeNotify();return}this.scrollElement=o,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((e=this.scrollElement)==null?void 0:e.window)??null,this.elementsCache.forEach(n=>{this.observer.observe(n)}),this.unsubs.push(this.options.observeElementRect(this,n=>{this.scrollRect=n,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(n,s)=>{this.scrollAdjustments=0,this.scrollDirection=s?this.getScrollOffset()<n?"forward":"backward":null,this.scrollOffset=n,this.isScrolling=s,this.maybeNotify()})),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0})}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(e,o)=>{const n=new Map,s=new Map;for(let a=o-1;a>=0;a--){const r=e[a];if(n.has(r.lane))continue;const c=s.get(r.lane);if(c==null||r.end>c.end?s.set(r.lane,r):r.end<c.end&&n.set(r.lane,!0),n.size===this.options.lanes)break}return s.size===this.options.lanes?Array.from(s.values()).sort((a,r)=>a.end===r.end?a.index-r.index:a.end-r.end)[0]:void 0},this.getMeasurementOptions=ce(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(e,o,n,s,a,r)=>(this.prevLanes!==void 0&&this.prevLanes!==r&&(this.lanesChangedFlag=!0),this.prevLanes=r,this.pendingMeasuredCacheIndexes=[],{count:e,paddingStart:o,scrollMargin:n,getItemKey:s,enabled:a,lanes:r}),{key:!1}),this.getMeasurements=ce(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:e,paddingStart:o,scrollMargin:n,getItemKey:s,enabled:a,lanes:r},c)=>{if(!a)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>e)for(const d of this.laneAssignments.keys())d>=e&&this.laneAssignments.delete(d);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),this.measurementsCache.length===0&&!this.lanesSettling&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(d=>{this.itemSizeCache.set(d.key,d.size)}));const l=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===e&&(this.lanesSettling=!1);const u=this.measurementsCache.slice(0,l),g=new Array(r).fill(void 0);for(let d=0;d<l;d++){const m=u[d];m&&(g[m.lane]=d)}for(let d=l;d<e;d++){const m=s(d),p=this.laneAssignments.get(d);let b,x;if(p!==void 0&&this.options.lanes>1){b=p;const E=g[b],I=E!==void 0?u[E]:void 0;x=I?I.end+this.options.gap:o+n}else{const E=this.options.lanes===1?u[d-1]:this.getFurthestMeasurement(u,d);x=E?E.end+this.options.gap:o+n,b=E?E.lane:d%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(d,b)}const C=c.get(m),y=typeof C=="number"?C:this.options.estimateSize(d),T=x+y;u[d]={index:d,start:x,size:y,end:T,key:m,lane:b},g[b]=d}return this.measurementsCache=u,u},{key:"getMeasurements",debug:()=>this.options.debug}),this.calculateRange=ce(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(e,o,n,s)=>this.range=e.length>0&&o>0?dn({measurements:e,outerSize:o,scrollOffset:n,lanes:s}):null,{key:"calculateRange",debug:()=>this.options.debug}),this.getVirtualIndexes=ce(()=>{let e=null,o=null;const n=this.calculateRange();return n&&(e=n.startIndex,o=n.endIndex),this.maybeNotify.updateDeps([this.isScrolling,e,o]),[this.options.rangeExtractor,this.options.overscan,this.options.count,e,o]},(e,o,n,s,a)=>s===null||a===null?[]:e({startIndex:s,endIndex:a,overscan:o,count:n}),{key:"getVirtualIndexes",debug:()=>this.options.debug}),this.indexFromElement=e=>{const o=this.options.indexAttribute,n=e.getAttribute(o);return n?parseInt(n,10):(console.warn(`Missing attribute name '${o}={index}' on measured element.`),-1)},this._measureElement=(e,o)=>{const n=this.indexFromElement(e),s=this.measurementsCache[n];if(!s)return;const a=s.key,r=this.elementsCache.get(a);r!==e&&(r&&this.observer.unobserve(r),this.observer.observe(e),this.elementsCache.set(a,e)),e.isConnected&&this.resizeItem(n,this.options.measureElement(e,o,this))},this.resizeItem=(e,o)=>{const n=this.measurementsCache[e];if(!n)return;const s=this.itemSizeCache.get(n.key)??n.size,a=o-s;a!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(n,a,this):n.start<this.getScrollOffset()+this.scrollAdjustments)&&(this.options.debug&&console.info("correction",a),this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=a,behavior:void 0})),this.pendingMeasuredCacheIndexes.push(n.index),this.itemSizeCache=new Map(this.itemSizeCache.set(n.key,o)),this.notify(!1))},this.measureElement=e=>{if(!e){this.elementsCache.forEach((o,n)=>{o.isConnected||(this.observer.unobserve(o),this.elementsCache.delete(n))});return}this._measureElement(e,void 0)},this.getVirtualItems=ce(()=>[this.getVirtualIndexes(),this.getMeasurements()],(e,o)=>{const n=[];for(let s=0,a=e.length;s<a;s++){const r=e[s],c=o[r];n.push(c)}return n},{key:"getVirtualItems",debug:()=>this.options.debug}),this.getVirtualItemForOffset=e=>{const o=this.getMeasurements();if(o.length!==0)return Ae(o[nt(0,o.length-1,n=>Ae(o[n]).start,e)])},this.getMaxScrollOffset=()=>{if(!this.scrollElement)return 0;if("scrollHeight"in this.scrollElement)return this.options.horizontal?this.scrollElement.scrollWidth-this.scrollElement.clientWidth:this.scrollElement.scrollHeight-this.scrollElement.clientHeight;{const e=this.scrollElement.document.documentElement;return this.options.horizontal?e.scrollWidth-this.scrollElement.innerWidth:e.scrollHeight-this.scrollElement.innerHeight}},this.getOffsetForAlignment=(e,o,n=0)=>{if(!this.scrollElement)return 0;const s=this.getSize(),a=this.getScrollOffset();o==="auto"&&(o=e>=a+s?"end":"start"),o==="center"?e+=(n-s)/2:o==="end"&&(e-=s);const r=this.getMaxScrollOffset();return Math.max(Math.min(r,e),0)},this.getOffsetForIndex=(e,o="auto")=>{e=Math.max(0,Math.min(e,this.options.count-1));const n=this.measurementsCache[e];if(!n)return;const s=this.getSize(),a=this.getScrollOffset();if(o==="auto")if(n.end>=a+s-this.options.scrollPaddingEnd)o="end";else if(n.start<=a+this.options.scrollPaddingStart)o="start";else return[a,o];if(o==="end"&&e===this.options.count-1)return[this.getMaxScrollOffset(),o];const r=o==="end"?n.end+this.options.scrollPaddingEnd:n.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(r,o,n.size),o]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(e,{align:o="start",behavior:n}={})=>{n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(e,o),{adjustments:void 0,behavior:n})},this.scrollToIndex=(e,{align:o="auto",behavior:n}={})=>{n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),e=Math.max(0,Math.min(e,this.options.count-1)),this.currentScrollToIndex=e;let s=0;const a=10,r=l=>{if(!this.targetWindow)return;const u=this.getOffsetForIndex(e,l);if(!u){console.warn("Failed to get offset for index:",e);return}const[g,d]=u;this._scrollToOffset(g,{adjustments:void 0,behavior:n}),this.targetWindow.requestAnimationFrame(()=>{const m=()=>{if(this.currentScrollToIndex!==e)return;const p=this.getScrollOffset(),b=this.getOffsetForIndex(e,d);if(!b){console.warn("Failed to get offset for index:",e);return}tn(b[0],p)||c(d)};this.isDynamicMode()?this.targetWindow.requestAnimationFrame(m):m()})},c=l=>{this.targetWindow&&this.currentScrollToIndex===e&&(s++,s<a?(this.options.debug&&console.info("Schedule retry",s,a),this.targetWindow.requestAnimationFrame(()=>r(l))):console.warn(`Failed to scroll to index ${e} after ${a} attempts.`))};r(o)},this.scrollBy=(e,{behavior:o}={})=>{o==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+e,{adjustments:void 0,behavior:o})},this.getTotalSize=()=>{var e;const o=this.getMeasurements();let n;if(o.length===0)n=this.options.paddingStart;else if(this.options.lanes===1)n=((e=o[o.length-1])==null?void 0:e.end)??0;else{const s=Array(this.options.lanes).fill(null);let a=o.length-1;for(;a>=0&&s.some(r=>r===null);){const r=o[a];s[r.lane]===null&&(s[r.lane]=r.end),a--}n=Math.max(...s.filter(r=>r!==null))}return Math.max(n-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(e,{adjustments:o,behavior:n})=>{this.options.scrollToFn(e,{behavior:n,adjustments:o},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(i)}}const nt=(t,i,e,o)=>{for(;t<=i;){const n=(t+i)/2|0,s=e(n);if(s<o)t=n+1;else if(s>o)i=n-1;else return n}return t>0?t-1:0};function dn({measurements:t,outerSize:i,scrollOffset:e,lanes:o}){const n=t.length-1,s=c=>t[c].start;if(t.length<=o)return{startIndex:0,endIndex:n};let a=nt(0,n,s,e),r=a;if(o===1)for(;r<n&&t[r].end<e+i;)r++;else if(o>1){const c=Array(o).fill(0);for(;r<n&&c.some(u=>u<e+i);){const u=t[r];c[u.lane]=u.end,r++}const l=Array(o).fill(e+i);for(;a>=0&&l.some(u=>u>=e);){const u=t[a];l[u.lane]=u.start,a--}a=Math.max(0,a-a%o),r=Math.min(n,r+(o-1-r%o))}return{startIndex:a,endIndex:r}}const Be=typeof document<"u"?f.useLayoutEffect:f.useEffect;function pn({useFlushSync:t=!0,...i}){const e=f.useReducer(()=>({}),{})[1],o={...i,onChange:(s,a)=>{var r;t&&a?re.flushSync(e):e(),(r=i.onChange)==null||r.call(i,s,a)}},[n]=f.useState(()=>new un(o));return n.setOptions(o),Be(()=>n._didMount(),[]),Be(()=>n._willUpdate()),n}function mn(t){return pn({observeElementRect:an,observeElementOffset:rn,scrollToFn:cn,...t})}function hn(t,i,e,o){let n=Qe(e);f.useEffect(()=>{t=t??window;function s(a){n.current(a)}return t.addEventListener(i,s,o),()=>t.removeEventListener(i,s,o)},[t,i,o])}function ot(t){let i=f.useRef({value:"",selectionStart:null,selectionEnd:null});return hn(t,"blur",e=>{let o=e.target;Pe(o)&&(i.current={value:o.value,selectionStart:o.selectionStart,selectionEnd:o.selectionEnd})}),R(()=>{if(!Je(t)&&Pe(t)&&t.isConnected){if(t.focus({preventScroll:!0}),t.value!==i.current.value)t.setSelectionRange(t.value.length,t.value.length);else{let{selectionStart:e,selectionEnd:o}=i.current;e!==null&&o!==null&&t.setSelectionRange(e,o)}i.current={value:"",selectionStart:null,selectionEnd:null}}})}function fn(t,{container:i,accept:e,walk:o}){let n=f.useRef(e),s=f.useRef(o);f.useEffect(()=>{n.current=e,s.current=o},[e,o]),ne(()=>{if(!i||!t)return;let a=dt(i);if(!a)return;let r=n.current,c=s.current,l=Object.assign(g=>r(g),{acceptNode:r}),u=a.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,l,!1);for(;u.nextNode();)c(u.currentNode)},[i,t,n,s])}function Le(t,i){let e=f.useRef([]),o=R(t);f.useEffect(()=>{let n=[...e.current];for(let[s,a]of i.entries())if(e.current[s]!==a){let r=o(i,n);return e.current=i,r}},[o,...i])}function bn(t){function i(){document.readyState!=="loading"&&(t(),document.removeEventListener("DOMContentLoaded",i))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",i),i())}let ae=[];bn(()=>{function t(i){if(!Ut(i.target)||i.target===document.body||ae[0]===i.target)return;let e=i.target;e=e.closest(Jt),ae.unshift(e??i.target),ae=ae.filter(o=>o!=null&&o.isConnected),ae.splice(10)}window.addEventListener("click",t,{capture:!0}),window.addEventListener("mousedown",t,{capture:!0}),window.addEventListener("focus",t,{capture:!0}),document.body.addEventListener("click",t,{capture:!0}),document.body.addEventListener("mousedown",t,{capture:!0}),document.body.addEventListener("focus",t,{capture:!0})});var gn=Object.defineProperty,vn=(t,i,e)=>i in t?gn(t,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[i]=e,He=(t,i,e)=>(vn(t,typeof i!="symbol"?i+"":i,e),e),v=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(v||{}),X=(t=>(t[t.Single=0]="Single",t[t.Multi=1]="Multi",t))(X||{}),Z=(t=>(t[t.Pointer=0]="Pointer",t[t.Focus=1]="Focus",t[t.Other=2]="Other",t))(Z||{}),it=(t=>(t[t.OpenCombobox=0]="OpenCombobox",t[t.CloseCombobox=1]="CloseCombobox",t[t.GoToOption=2]="GoToOption",t[t.SetTyping=3]="SetTyping",t[t.RegisterOption=4]="RegisterOption",t[t.UnregisterOption=5]="UnregisterOption",t[t.DefaultToFirstOption=6]="DefaultToFirstOption",t[t.SetActivationTrigger=7]="SetActivationTrigger",t[t.UpdateVirtualConfiguration=8]="UpdateVirtualConfiguration",t[t.SetInputElement=9]="SetInputElement",t[t.SetButtonElement=10]="SetButtonElement",t[t.SetOptionsElement=11]="SetOptionsElement",t[t.MarkInputAsMoved=12]="MarkInputAsMoved",t))(it||{});function De(t,i=e=>e){let e=t.activeOptionIndex!==null?t.options[t.activeOptionIndex]:null,o=i(t.options.slice()),n=o.length>0&&o[0].dataRef.current.order!==null?o.sort((a,r)=>a.dataRef.current.order-r.dataRef.current.order):Zt(o,a=>a.dataRef.current.domRef.current),s=e?n.indexOf(e):null;return s===-1&&(s=null),{options:n,activeOptionIndex:s}}let xn={1(t){var i;if((i=t.dataRef.current)!=null&&i.disabled||t.comboboxState===1)return t;let e=t.inputElement?fe.Tracked(xt(t.inputElement)):t.inputPositionState;return{...t,activeOptionIndex:null,comboboxState:1,isTyping:!1,activationTrigger:2,inputPositionState:e,__demoMode:!1}},0(t){var i,e;if((i=t.dataRef.current)!=null&&i.disabled||t.comboboxState===0)return t;if((e=t.dataRef.current)!=null&&e.value){let o=t.dataRef.current.calculateIndex(t.dataRef.current.value);if(o!==-1)return{...t,activeOptionIndex:o,comboboxState:0,__demoMode:!1,inputPositionState:fe.Idle}}return{...t,comboboxState:0,inputPositionState:fe.Idle,__demoMode:!1}},3(t,i){return t.isTyping===i.isTyping?t:{...t,isTyping:i.isTyping}},2(t,i){var e,o,n,s;if((e=t.dataRef.current)!=null&&e.disabled||t.optionsElement&&!((o=t.dataRef.current)!=null&&o.optionsPropsRef.current.static)&&t.comboboxState===1)return t;if(t.virtual){let{options:l,disabled:u}=t.virtual,g=i.focus===B.Specific?i.idx:Ne(i,{resolveItems:()=>l,resolveActiveIndex:()=>{var m,p;return(p=(m=t.activeOptionIndex)!=null?m:l.findIndex(b=>!u(b)))!=null?p:null},resolveDisabled:u,resolveId(){throw new Error("Function not implemented.")}}),d=(n=i.trigger)!=null?n:2;return t.activeOptionIndex===g&&t.activationTrigger===d?t:{...t,activeOptionIndex:g,activationTrigger:d,isTyping:!1,__demoMode:!1}}let a=De(t);if(a.activeOptionIndex===null){let l=a.options.findIndex(u=>!u.dataRef.current.disabled);l!==-1&&(a.activeOptionIndex=l)}let r=i.focus===B.Specific?i.idx:Ne(i,{resolveItems:()=>a.options,resolveActiveIndex:()=>a.activeOptionIndex,resolveId:l=>l.id,resolveDisabled:l=>l.dataRef.current.disabled}),c=(s=i.trigger)!=null?s:2;return t.activeOptionIndex===r&&t.activationTrigger===c?t:{...t,...a,isTyping:!1,activeOptionIndex:r,activationTrigger:c,__demoMode:!1}},4:(t,i)=>{var e,o,n,s;if((e=t.dataRef.current)!=null&&e.virtual)return{...t,options:[...t.options,i.payload]};let a=i.payload,r=De(t,l=>(l.push(a),l));t.activeOptionIndex===null&&(n=(o=t.dataRef.current).isSelected)!=null&&n.call(o,i.payload.dataRef.current.value)&&(r.activeOptionIndex=r.options.indexOf(a));let c={...t,...r,activationTrigger:2};return(s=t.dataRef.current)!=null&&s.__demoMode&&t.dataRef.current.value===void 0&&(c.activeOptionIndex=0),c},5:(t,i)=>{var e;if((e=t.dataRef.current)!=null&&e.virtual)return{...t,options:t.options.filter(n=>n.id!==i.id)};let o=De(t,n=>{let s=n.findIndex(a=>a.id===i.id);return s!==-1&&n.splice(s,1),n});return{...t,...o,activationTrigger:2}},6:(t,i)=>t.defaultToFirstOption===i.value?t:{...t,defaultToFirstOption:i.value},7:(t,i)=>t.activationTrigger===i.trigger?t:{...t,activationTrigger:i.trigger},8:(t,i)=>{var e,o;if(t.virtual===null)return{...t,virtual:{options:i.options,disabled:(e=i.disabled)!=null?e:()=>!1}};if(t.virtual.options===i.options&&t.virtual.disabled===i.disabled)return t;let n=t.activeOptionIndex;if(t.activeOptionIndex!==null){let s=i.options.indexOf(t.virtual.options[t.activeOptionIndex]);s!==-1?n=s:n=null}return{...t,activeOptionIndex:n,virtual:{options:i.options,disabled:(o=i.disabled)!=null?o:()=>!1}}},9:(t,i)=>t.inputElement===i.element?t:{...t,inputElement:i.element},10:(t,i)=>t.buttonElement===i.element?t:{...t,buttonElement:i.element},11:(t,i)=>t.optionsElement===i.element?t:{...t,optionsElement:i.element},12(t){return t.inputPositionState.kind!=="Tracked"?t:{...t,inputPositionState:fe.Moved}}};class ke extends bt{constructor(i){super(i),He(this,"actions",{onChange:e=>{let{onChange:o,compare:n,mode:s,value:a}=this.state.dataRef.current;return ue(s,{0:()=>o==null?void 0:o(e),1:()=>{let r=a.slice(),c=r.findIndex(l=>n(l,e));return c===-1?r.push(e):r.splice(c,1),o==null?void 0:o(r)}})},registerOption:(e,o)=>(this.send({type:4,payload:{id:e,dataRef:o}}),()=>{this.state.activeOptionIndex===this.state.dataRef.current.calculateIndex(o.current.value)&&this.send({type:6,value:!0}),this.send({type:5,id:e})}),goToOption:(e,o)=>(this.send({type:6,value:!1}),this.send({type:2,...e,trigger:o})),setIsTyping:e=>{this.send({type:3,isTyping:e})},closeCombobox:()=>{var e,o;this.send({type:1}),this.send({type:6,value:!1}),(o=(e=this.state.dataRef.current).onClose)==null||o.call(e)},openCombobox:()=>{this.send({type:0}),this.send({type:6,value:!0})},setActivationTrigger:e=>{this.send({type:7,trigger:e})},selectActiveOption:()=>{let e=this.selectors.activeOptionIndex(this.state);if(e!==null){if(this.actions.setIsTyping(!1),this.state.virtual)this.actions.onChange(this.state.virtual.options[e]);else{let{dataRef:o}=this.state.options[e];this.actions.onChange(o.current.value)}this.actions.goToOption({focus:B.Specific,idx:e})}},setInputElement:e=>{this.send({type:9,element:e})},setButtonElement:e=>{this.send({type:10,element:e})},setOptionsElement:e=>{this.send({type:11,element:e})}}),He(this,"selectors",{activeDescendantId:e=>{var o,n;let s=this.selectors.activeOptionIndex(e);if(s!==null)return e.virtual?(n=e.options.find(a=>!a.dataRef.current.disabled&&e.dataRef.current.compare(a.dataRef.current.value,e.virtual.options[s])))==null?void 0:n.id:(o=e.options[s])==null?void 0:o.id},activeOptionIndex:e=>{if(e.defaultToFirstOption&&e.activeOptionIndex===null&&(e.virtual?e.virtual.options.length>0:e.options.length>0)){if(e.virtual){let{options:n,disabled:s}=e.virtual,a=n.findIndex(r=>{var c;return!((c=s==null?void 0:s(r))!=null&&c)});if(a!==-1)return a}let o=e.options.findIndex(n=>!n.dataRef.current.disabled);if(o!==-1)return o}return e.activeOptionIndex},activeOption:e=>{var o,n;let s=this.selectors.activeOptionIndex(e);return s===null?null:e.virtual?e.virtual.options[s??0]:(n=(o=e.options[s])==null?void 0:o.dataRef.current.value)!=null?n:null},isActive:(e,o,n)=>{var s;let a=this.selectors.activeOptionIndex(e);return a===null?!1:e.virtual?a===e.dataRef.current.calculateIndex(o):((s=e.options[a])==null?void 0:s.id)===n},shouldScrollIntoView:(e,o,n)=>!(e.virtual||e.__demoMode||e.comboboxState!==0||e.activationTrigger===0||!this.selectors.isActive(e,o,n)),didInputMove(e){return e.inputPositionState.kind==="Moved"}});{let e=this.state.id,o=tt.get(null);this.disposables.add(o.on(gt.Push,n=>{!o.selectors.isTop(n,e)&&this.state.comboboxState===0&&this.actions.closeCombobox()})),this.on(0,()=>o.actions.push(e)),this.on(1,()=>o.actions.pop(e))}this.disposables.group(e=>{this.on(1,o=>{o.inputElement&&(e.dispose(),e.add(vt(o.inputElement,o.inputPositionState,()=>{this.send({type:12})})))})})}static new({id:i,virtual:e=null,__demoMode:o=!1}){var n;return new ke({id:i,dataRef:{current:{}},comboboxState:o?0:1,isTyping:!1,options:[],virtual:e?{options:e.options,disabled:(n=e.disabled)!=null?n:()=>!1}:null,activeOptionIndex:null,activationTrigger:2,inputElement:null,buttonElement:null,optionsElement:null,__demoMode:o,inputPositionState:fe.Idle})}reduce(i,e){return ue(e.type,xn,i,e)}}const st=f.createContext(null);function we(t){let i=f.useContext(st);if(i===null){let e=new Error(`<${t} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(e,at),e}return i}function at({id:t,virtual:i=null,__demoMode:e=!1}){let o=f.useMemo(()=>ke.new({id:t,virtual:i,__demoMode:e}),[]);return wt(()=>o.dispose()),o}let be=f.createContext(null);be.displayName="ComboboxDataContext";function de(t){let i=f.useContext(be);if(i===null){let e=new Error(`<${t} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(e,de),e}return i}let rt=f.createContext(null);function wn(t){let i=we("VirtualProvider"),e=de("VirtualProvider"),{options:o}=e.virtual,n=L(i,m=>m.optionsElement),[s,a]=f.useMemo(()=>{let m=n;if(!m)return[0,0];let p=window.getComputedStyle(m);return[parseFloat(p.paddingBlockStart||p.paddingTop),parseFloat(p.paddingBlockEnd||p.paddingBottom)]},[n]),r=mn({enabled:o.length!==0,scrollPaddingStart:s,scrollPaddingEnd:a,count:o.length,estimateSize(){return 40},getScrollElement(){return i.state.optionsElement},overscan:12}),[c,l]=f.useState(0);ne(()=>{l(m=>m+1)},[o]);let u=r.getVirtualItems(),g=L(i,m=>m.activationTrigger===Z.Pointer),d=L(i,i.selectors.activeOptionIndex);return u.length===0?null:$.createElement(rt.Provider,{value:r},$.createElement("div",{style:{position:"relative",width:"100%",height:`${r.getTotalSize()}px`},ref:m=>{m&&(g||d!==null&&o.length>d&&r.scrollToIndex(d))}},u.map(m=>{var p;return $.createElement(f.Fragment,{key:m.key},$.cloneElement((p=t.children)==null?void 0:p.call(t,{...t.slot,option:o[m.index]}),{key:`${c}-${m.key}`,"data-index":m.index,"aria-setsize":o.length,"aria-posinset":m.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${m.start}px)`,overflowAnchor:"none"}}))})))}let yn=f.Fragment;function En(t,i){let e=f.useId(),o=_t(),{value:n,defaultValue:s,onChange:a,form:r,name:c,by:l,invalid:u=!1,disabled:g=o||!1,onClose:d,__demoMode:m=!1,multiple:p=!1,immediate:b=!1,virtual:x=null,nullable:C,...y}=t,T=jt(s),[E=p?[]:void 0,I]=Bt(n,a,T),S=at({id:e,virtual:x,__demoMode:m}),V=f.useRef({static:!1,hold:!1}),k=yt(l),_=R(z=>x?l===null?x.options.indexOf(z):x.options.findIndex(se=>k(se,z)):S.state.options.findIndex(se=>k(se.dataRef.current.value,z))),q=f.useCallback(z=>ue(F.mode,{[X.Multi]:()=>E.some(se=>k(se,z)),[X.Single]:()=>k(E,z)}),[E]),K=L(S,z=>z.virtual),w=R(()=>d==null?void 0:d()),F=f.useMemo(()=>({__demoMode:m,immediate:b,optionsPropsRef:V,value:E,defaultValue:T,disabled:g,invalid:u,mode:p?X.Multi:X.Single,virtual:x?K:null,onChange:I,isSelected:q,calculateIndex:_,compare:k,onClose:w}),[m,b,V,E,T,g,u,p,x,K,I,q,_,k,w]);ne(()=>{var z;x&&S.send({type:it.UpdateVirtualConfiguration,options:x.options,disabled:(z=x.disabled)!=null?z:null})},[x,x==null?void 0:x.options,x==null?void 0:x.disabled]),ne(()=>{S.state.dataRef.current=F},[F]);let[P,O,Y,pe]=L(S,z=>[z.comboboxState,z.buttonElement,z.inputElement,z.optionsElement]),oe=tt.get(null),le=L(oe,f.useCallback(z=>oe.selectors.isTop(z,e),[oe,e]));Et(le,[O,Y,pe],()=>S.actions.closeCombobox());let ie=L(S,S.selectors.activeOptionIndex),me=L(S,S.selectors.activeOption),h=ve({open:P===v.Open,disabled:g,invalid:u,activeIndex:ie,activeOption:me,value:E}),[G,N]=Lt(),H=i===null?{}:{ref:i},M=f.useCallback(()=>{if(T!==void 0)return I==null?void 0:I(T)},[I,T]),W=xe();return $.createElement(N,{value:G,props:{htmlFor:Y==null?void 0:Y.id},slot:{open:P===v.Open,disabled:g}},$.createElement(St,null,$.createElement(be.Provider,{value:F},$.createElement(st.Provider,{value:S},$.createElement(Gt,{value:ue(P,{[v.Open]:Oe.Open,[v.Closed]:Oe.Closed})},c!=null&&$.createElement(Ht,{disabled:g,data:E!=null?{[c]:E}:{},form:r,onReset:M}),W({ourProps:H,theirProps:y,slot:h,defaultTag:yn,name:"Combobox"}))))))}let Sn="input";function On(t,i){var e,o;let n=we("Combobox.Input"),s=de("Combobox.Input"),a=f.useId(),r=Wt(),{id:c=r||`headlessui-combobox-input-${a}`,onChange:l,displayValue:u,disabled:g=s.disabled||!1,autoFocus:d=!1,type:m="text",...p}=t,b=f.useRef(null),x=ze(b,i,Ot(),n.actions.setInputElement),[C,y]=L(n,h=>[h.comboboxState,h.isTyping]),T=pt(),E=R(()=>{n.actions.onChange(null),n.state.optionsElement&&(n.state.optionsElement.scrollTop=0),n.actions.goToOption({focus:B.Nothing})}),I=f.useMemo(()=>{var h;return typeof u=="function"&&s.value!==void 0?(h=u(s.value))!=null?h:"":typeof s.value=="string"?s.value:""},[s.value,u]);Le(([h,G],[N,H])=>{if(n.state.isTyping)return;let M=b.current;M&&((H===v.Open&&G===v.Closed||h!==N)&&(M.value=h),requestAnimationFrame(()=>{if(n.state.isTyping||!M||Je(M))return;let{selectionStart:W,selectionEnd:z}=M;Math.abs((z??0)-(W??0))===0&&W===0&&M.setSelectionRange(M.value.length,M.value.length)}))},[I,C,y]),Le(([h],[G])=>{if(h===v.Open&&G===v.Closed){if(n.state.isTyping)return;let N=b.current;if(!N)return;let H=N.value,{selectionStart:M,selectionEnd:W,selectionDirection:z}=N;N.value="",N.value=H,z!==null?N.setSelectionRange(M,W,z):N.setSelectionRange(M,W)}},[C]);let S=f.useRef(!1),V=R(()=>{S.current=!0}),k=R(()=>{T.nextFrame(()=>{S.current=!1})}),_=R(h=>{switch(n.actions.setIsTyping(!0),h.key){case U.Enter:if(n.state.comboboxState!==v.Open||S.current)return;if(h.preventDefault(),h.stopPropagation(),n.selectors.activeOptionIndex(n.state)===null){n.actions.closeCombobox();return}n.actions.selectActiveOption(),s.mode===X.Single&&n.actions.closeCombobox();break;case U.ArrowDown:return h.preventDefault(),h.stopPropagation(),ue(n.state.comboboxState,{[v.Open]:()=>n.actions.goToOption({focus:B.Next}),[v.Closed]:()=>n.actions.openCombobox()});case U.ArrowUp:return h.preventDefault(),h.stopPropagation(),ue(n.state.comboboxState,{[v.Open]:()=>n.actions.goToOption({focus:B.Previous}),[v.Closed]:()=>{re.flushSync(()=>n.actions.openCombobox()),s.value||n.actions.goToOption({focus:B.Last})}});case U.Home:if(n.state.comboboxState===v.Closed||h.shiftKey)break;return h.preventDefault(),h.stopPropagation(),n.actions.goToOption({focus:B.First});case U.PageUp:return h.preventDefault(),h.stopPropagation(),n.actions.goToOption({focus:B.First});case U.End:if(n.state.comboboxState===v.Closed||h.shiftKey)break;return h.preventDefault(),h.stopPropagation(),n.actions.goToOption({focus:B.Last});case U.PageDown:return h.preventDefault(),h.stopPropagation(),n.actions.goToOption({focus:B.Last});case U.Escape:return n.state.comboboxState!==v.Open?void 0:(h.preventDefault(),n.state.optionsElement&&!s.optionsPropsRef.current.static&&h.stopPropagation(),s.mode===X.Single&&s.value===null&&E(),n.actions.closeCombobox());case U.Tab:if(n.actions.setIsTyping(!1),n.state.comboboxState!==v.Open)return;s.mode===X.Single&&n.state.activationTrigger!==Z.Focus&&n.actions.selectActiveOption(),n.actions.closeCombobox();break}}),q=R(h=>{l==null||l(h),s.mode===X.Single&&h.target.value===""&&E(),n.actions.openCombobox()}),K=R(h=>{var G,N,H;let M=(G=h.relatedTarget)!=null?G:ae.find(W=>W!==h.currentTarget);if(!((N=n.state.optionsElement)!=null&&N.contains(M))&&!((H=n.state.buttonElement)!=null&&H.contains(M))&&n.state.comboboxState===v.Open)return h.preventDefault(),s.mode===X.Single&&s.value===null&&E(),n.actions.closeCombobox()}),w=R(h=>{var G,N,H;let M=(G=h.relatedTarget)!=null?G:ae.find(W=>W!==h.currentTarget);(N=n.state.buttonElement)!=null&&N.contains(M)||(H=n.state.optionsElement)!=null&&H.contains(M)||s.disabled||s.immediate&&n.state.comboboxState!==v.Open&&T.microTask(()=>{re.flushSync(()=>n.actions.openCombobox()),n.actions.setActivationTrigger(Z.Focus)})}),F=Te(),P=qt(),{isFocused:O,focusProps:Y}=Ze({autoFocus:d}),{isHovered:pe,hoverProps:oe}=et({isDisabled:g}),le=L(n,h=>h.optionsElement),ie=ve({open:C===v.Open,disabled:g,invalid:s.invalid,hover:pe,focus:O,autofocus:d}),me=Ce({ref:x,id:c,role:"combobox",type:m,"aria-controls":le==null?void 0:le.id,"aria-expanded":C===v.Open,"aria-activedescendant":L(n,n.selectors.activeDescendantId),"aria-labelledby":F,"aria-describedby":P,"aria-autocomplete":"list",defaultValue:(o=(e=t.defaultValue)!=null?e:s.defaultValue!==void 0?u==null?void 0:u(s.defaultValue):null)!=null?o:s.defaultValue,disabled:g||void 0,autoFocus:d,onCompositionStart:V,onCompositionEnd:k,onKeyDown:_,onChange:q,onFocus:w,onBlur:K},Y,oe);return xe()({ourProps:me,theirProps:p,slot:ie,defaultTag:Sn,name:"Combobox.Input"})}let zn="button";function Dn(t,i){let e=we("Combobox.Button"),o=de("Combobox.Button"),[n,s]=f.useState(null),a=ze(i,s,e.actions.setButtonElement),r=f.useId(),{id:c=`headlessui-combobox-button-${r}`,disabled:l=o.disabled||!1,autoFocus:u=!1,...g}=t,[d,m,p]=L(e,w=>[w.comboboxState,w.inputElement,w.optionsElement]),b=ot(m),x=d===v.Open;zt(x,{trigger:n,action:f.useCallback(w=>{if(n!=null&&n.contains(w.target))return he.Ignore;if(m!=null&&m.contains(w.target))return he.Ignore;let F=w.target.closest('[role="option"]:not([data-disabled])');return Kt(F)?he.Select(F):p!=null&&p.contains(w.target)?he.Ignore:he.Close},[n,m,p]),close:e.actions.closeCombobox,select:e.actions.selectActiveOption});let C=R(w=>{switch(w.key){case U.Space:case U.Enter:w.preventDefault(),w.stopPropagation(),e.state.comboboxState===v.Closed&&re.flushSync(()=>e.actions.openCombobox()),b();return;case U.ArrowDown:w.preventDefault(),w.stopPropagation(),e.state.comboboxState===v.Closed&&(re.flushSync(()=>e.actions.openCombobox()),e.state.dataRef.current.value||e.actions.goToOption({focus:B.First})),b();return;case U.ArrowUp:w.preventDefault(),w.stopPropagation(),e.state.comboboxState===v.Closed&&(re.flushSync(()=>e.actions.openCombobox()),e.state.dataRef.current.value||e.actions.goToOption({focus:B.Last})),b();return;case U.Escape:if(e.state.comboboxState!==v.Open)return;w.preventDefault(),e.state.optionsElement&&!o.optionsPropsRef.current.static&&w.stopPropagation(),re.flushSync(()=>e.actions.closeCombobox()),b();return;default:return}}),y=Dt(()=>{e.state.comboboxState===v.Open?e.actions.closeCombobox():e.actions.openCombobox(),b()}),T=Te([c]),{isFocusVisible:E,focusProps:I}=Ze({autoFocus:u}),{isHovered:S,hoverProps:V}=et({isDisabled:l}),{pressed:k,pressProps:_}=mt({disabled:l}),q=ve({open:d===v.Open,active:k||d===v.Open,disabled:l,invalid:o.invalid,value:o.value,hover:S,focus:E}),K=Ce({ref:a,id:c,type:ht(t,n),tabIndex:-1,"aria-haspopup":"listbox","aria-controls":p==null?void 0:p.id,"aria-expanded":d===v.Open,"aria-labelledby":T,disabled:l||void 0,autoFocus:u,onKeyDown:C},y,I,V,_);return xe()({ourProps:K,theirProps:g,slot:q,defaultTag:zn,name:"Combobox.Button"})}let In="div",Cn=Me.RenderStrategy|Me.Static;function Tn(t,i){var e,o,n;let s=f.useId(),{id:a=`headlessui-combobox-options-${s}`,hold:r=!1,anchor:c,portal:l=!1,modal:u=!0,transition:g=!1,...d}=t,m=we("Combobox.Options"),p=de("Combobox.Options"),b=It(c);b&&(l=!0);let[x,C]=Ct(b),[y,T]=f.useState(null),E=Tt(),I=ze(i,b?x:null,m.actions.setOptionsElement,T),[S,V,k,_,q]=L(m,j=>[j.comboboxState,j.inputElement,j.buttonElement,j.optionsElement,j.activationTrigger]),K=Fe(V||k),w=Fe(_),F=Xt(),[P,O]=Yt(g,y,F!==null?(F&Oe.Open)===Oe.Open:S===v.Open);kt(P,V,m.actions.closeCombobox);let Y=p.__demoMode?!1:u&&S===v.Open;Mt(Y,w);let pe=p.__demoMode?!1:u&&S===v.Open;Nt(pe,{allowed:f.useCallback(()=>[V,k,_],[V,k,_])});let oe=L(m,m.selectors.didInputMove)?!1:P;ne(()=>{var j;p.optionsPropsRef.current.static=(j=t.static)!=null?j:!1},[p.optionsPropsRef,t.static]),ne(()=>{p.optionsPropsRef.current.hold=r},[p.optionsPropsRef,r]),fn(S===v.Open,{container:_,accept(j){return j.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:j.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(j){j.setAttribute("role","none")}});let le=Te([k==null?void 0:k.id]),ie=ve({open:S===v.Open,option:void 0}),me=R(()=>{m.actions.setActivationTrigger(Z.Pointer)}),h=R(j=>{j.preventDefault(),m.actions.setActivationTrigger(Z.Pointer)}),G=Ce(b?E():{},{"aria-labelledby":le,role:"listbox","aria-multiselectable":p.mode===X.Multi?!0:void 0,id:a,ref:I,style:{...d.style,...C,"--input-width":Re(P,V,!0).width,"--button-width":Re(P,k,!0).width},onWheel:q===Z.Pointer?void 0:me,onMouseDown:h,...Qt(O)}),N=P&&S===v.Closed&&!t.static,H=$e(N,(e=p.virtual)==null?void 0:e.options),M=$e(N,p.value),W=f.useCallback(j=>p.compare(M,j),[p.compare,M]),z=f.useMemo(()=>{if(!p.virtual)return p;if(H===void 0)throw new Error("Missing `options` in virtual mode");return H!==p.virtual.options?{...p,virtual:{...p.virtual,options:H}}:p},[p,H,(o=p.virtual)==null?void 0:o.options]);p.virtual&&Object.assign(d,{children:$.createElement(be.Provider,{value:z},$.createElement(wn,{slot:ie},d.children))});let se=xe(),lt=f.useMemo(()=>p.mode===X.Multi?p:{...p,isSelected:W},[p,W]);return $.createElement(Ft,{enabled:l?t.static||P:!1,ownerDocument:K},$.createElement(be.Provider,{value:lt},se({ourProps:G,theirProps:{...d,children:$.createElement(Rt,{freeze:N},typeof d.children=="function"?(n=d.children)==null?void 0:n.call(d,ie):d.children)},slot:ie,defaultTag:In,features:Cn,visible:oe,name:"Combobox.Options"})))}let kn="div";function Mn(t,i){var e,o,n;let s=de("Combobox.Option"),a=we("Combobox.Option"),r=f.useId(),{id:c=`headlessui-combobox-option-${r}`,value:l,disabled:u=(n=(o=(e=s.virtual)==null?void 0:e.disabled)==null?void 0:o.call(e,l))!=null?n:!1,order:g=null,...d}=t,[m]=L(a,O=>[O.inputElement]),p=ot(m),b=L(a,f.useCallback(O=>a.selectors.isActive(O,l,c),[l,c])),x=s.isSelected(l),C=f.useRef(null),y=Qe({disabled:u,value:l,domRef:C,order:g}),T=f.useContext(rt),E=ze(i,C,T?T.measureElement:null),I=R(()=>{a.actions.setIsTyping(!1),a.actions.onChange(l)});ne(()=>a.actions.registerOption(c,y),[y,c]);let S=L(a,f.useCallback(O=>a.selectors.shouldScrollIntoView(O,l,c),[l,c]));ne(()=>{if(S)return ft().requestAnimationFrame(()=>{var O,Y;(Y=(O=C.current)==null?void 0:O.scrollIntoView)==null||Y.call(O,{block:"nearest"})})},[S,C]);let V=R(O=>{O.preventDefault(),O.button===Pt.Left&&(u||(I(),At()||requestAnimationFrame(()=>p()),s.mode===X.Single&&a.actions.closeCombobox()))}),k=R(()=>{if(u)return a.actions.goToOption({focus:B.Nothing});let O=s.calculateIndex(l);a.actions.goToOption({focus:B.Specific,idx:O})}),_=$t(),q=R(O=>_.update(O)),K=R(O=>{if(!_.wasMoved(O)||u||b&&a.state.activationTrigger===Z.Pointer)return;let Y=s.calculateIndex(l);a.actions.goToOption({focus:B.Specific,idx:Y},Z.Pointer)}),w=R(O=>{_.wasMoved(O)&&(u||b&&(s.optionsPropsRef.current.hold||a.state.activationTrigger===Z.Pointer&&a.actions.goToOption({focus:B.Nothing})))}),F=ve({active:b,focus:b,selected:x,disabled:u}),P={id:c,ref:E,role:"option",tabIndex:u===!0?void 0:-1,"aria-disabled":u===!0?!0:void 0,"aria-selected":x,disabled:void 0,onMouseDown:V,onFocus:k,onPointerEnter:q,onMouseEnter:q,onPointerMove:K,onMouseMove:K,onPointerLeave:w,onMouseLeave:w};return xe()({ourProps:P,theirProps:d,slot:F,defaultTag:kn,name:"Combobox.Option"})}let Nn=ge(En),Fn=ge(Dn),Rn=ge(On),$n=Vt,Pn=ge(Tn),An=ge(Mn),te=Object.assign(Nn,{Input:Rn,Button:Fn,Label:$n,Options:Pn,Option:An});const Vn=268,_n=(t,i)=>{const e=new RegExp(i,"gi");return t.replace(e,o=>"<b>"+o+"</b>")},jn=(t,i)=>ee("zep-flex zep-w-full zep-items-center zep-justify-between zep-bg-background-light zep-px-1 zep-py-0.75",{"zep-bg-greyscale-200":t},{"zep-bg-greyscale-300":i},{"zep-pr-3":i}),Ie=({disabled:t=!1,items:i,label:e,message:o,noOptionsLabel:n,placeholder:s,readOnly:a=!1,state:r="default",...c})=>{const l=$.useRef(null),u=$.useRef(null),g=r==="error",d=r==="info",[m,p]=$.useState(""),[b,x]=$.useState(null),C=m!==""||b!==null,y=t||a,T=g?"zep-text-error":d?"zep-text-info":"",E=m===""?i:i.filter(I=>I.name.toLowerCase().includes(m.toLowerCase()));return D.jsxDEV("div",{className:ut(ee("zep-relative","zep-inline-block","zep-text-left","zep-w-full",{"zep-cursor-not-allowed zep-opacity-disabled":t}),c.className),"data-testid":"zep-drop-down-filter",...c,children:[D.jsxDEV(te,{as:"div",value:b,onChange:I=>{x(I),p("")},disabled:y,children:({open:I})=>{const V=ct(u.current)<Vn,k=t?"zep-text-opacity-disabled":"zep-text-typography-dark-100",_=ee("zep-bg-background-light","zep-inline-flex","zep-justify-between","zep-rounded-4","zep-border-solid","zep-pl-1","zep-py-0.75","zep-font-roboto","zep-w-full","zep-outline-none","zep-truncate",g?"zep-border-2 zep-border-error":"zep-border-1 zep-border-neutral-dark-default",C?"zep-pr-4":"zep-pr-0.75",k,"placeholder:zep-text-typography-dark-100/70",{"zep-ring":I},{"zep-bg-background-medium":a},{"zep-border-opacity-disabled":t},{"zep-active:zep-ring":!y},{"zep-ring-offset-1":!y},{"focus-visible:zep-ring":!y},{"zep-ring-focus":!y},{"zep-cursor-not-allowed":y}),q=ee("zep-absolute","zep-shadow-sm","zep-py-0.25","zep-z-10","zep-right-0","zep-w-full","zep-max-h-[268px]","zep-origin-top-right","zep-rounded-4","zep-bg-background-light","zep-ring-1,","zep-ring-tertiary","zep-ring-opacity-1","focus:outline-none","zep-overflow-hidden","zep-overflow-y-auto",V?"zep-mb-[-25px]":"zep-mt-0.25",{"zep-bottom-full":V}),K=ee("zep-absolute","zep-top-0.75","zep-right-2.5","zep-flex","zep-items-center"),w=ee(y?"zep-text-opacity-disabled":"zep-text-typography-dark-100","zep-shrink-0","zep-transition-transform","zep-duration-300",{"zep-rotate-180":I});return D.jsxDEV(D.Fragment,{children:[e&&D.jsxDEV(te.Label,{className:ee("zep-block","zep-mb-0.5",{"zep-text-opacity-disabled":t}),children:e},void 0,!1,{fileName:"/home/circleci/project/src/components/drop-down-filter/DropDownFilter.tsx",lineNumber:147,columnNumber:17},globalThis),D.jsxDEV("div",{className:"zeb-block zep-relative zep-mt-0.5",children:[D.jsxDEV(te.Input,{className:_,autoComplete:"off",placeholder:a?void 0:s,readOnly:a,ref:u,"data-testid":"zep-drop-down-filter-input",value:b??m,onChange:F=>p(F.target.value)},void 0,!1,{fileName:"/home/circleci/project/src/components/drop-down-filter/DropDownFilter.tsx",lineNumber:152,columnNumber:17},globalThis),!!b&&D.jsxDEV("button",{className:K,"data-testid":"zep-drop-down-filter-delete",disabled:y,onClick:()=>{p(""),x(null)},children:D.jsxDEV(ye,{className:k,name:"delete-circle",size:24},void 0,!1,{fileName:"/home/circleci/project/src/components/drop-down-filter/DropDownFilter.tsx",lineNumber:172,columnNumber:21},globalThis)},void 0,!1,{fileName:"/home/circleci/project/src/components/drop-down-filter/DropDownFilter.tsx",lineNumber:163,columnNumber:19},globalThis),D.jsxDEV(te.Button,{"data-testid":"zep-drop-down-filter-button",className:"zep-absolute zep-inset-y-[0px] zep-right-[0px] zep-flex zep-items-center zep-pr-0.75",children:D.jsxDEV(ye,{className:w,name:"chevron-mini-down",role:"img",size:24},void 0,!1,{fileName:"/home/circleci/project/src/components/drop-down-filter/DropDownFilter.tsx",lineNumber:179,columnNumber:19},globalThis)},void 0,!1,{fileName:"/home/circleci/project/src/components/drop-down-filter/DropDownFilter.tsx",lineNumber:175,columnNumber:17},globalThis),E.length>0?D.jsxDEV(te.Options,{className:q,ref:l,"data-testid":"zep-drop-down-filter-menu",children:E.map(F=>D.jsxDEV(te.Option,{"data-testid":"zep-drop-down-filter-option",value:F.name,className:({active:P,selected:O})=>jn(P,O),children:({selected:P})=>D.jsxDEV(D.Fragment,{children:[D.jsxDEV("span",{className:"zep-truncate",dangerouslySetInnerHTML:{__html:_n(F.name,m)}},void 0,!1,{fileName:"/home/circleci/project/src/components/drop-down-filter/DropDownFilter.tsx",lineNumber:196,columnNumber:29},globalThis),P&&D.jsxDEV(ye,{name:"check",role:"img",size:24,className:"zep-absolute zep-right-1"},void 0,!1,{fileName:"/home/circleci/project/src/components/drop-down-filter/DropDownFilter.tsx",lineNumber:201,columnNumber:31},globalThis)]},void 0,!0,{fileName:"/home/circleci/project/src/components/drop-down-filter/DropDownFilter.tsx",lineNumber:195,columnNumber:27},globalThis)},F.id,!1,{fileName:"/home/circleci/project/src/components/drop-down-filter/DropDownFilter.tsx",lineNumber:188,columnNumber:23},globalThis))},void 0,!1,{fileName:"/home/circleci/project/src/components/drop-down-filter/DropDownFilter.tsx",lineNumber:182,columnNumber:19},globalThis):D.jsxDEV(te.Options,{className:q,ref:l,children:D.jsxDEV(te.Option,{"data-testid":"zep-drop-down-filter-no-options",value:0,className:ee("zep-block zep-py-0.75 zep-text-center"),children:n},void 0,!1,{fileName:"/home/circleci/project/src/components/drop-down-filter/DropDownFilter.tsx",lineNumber:210,columnNumber:21},globalThis)},void 0,!1,{fileName:"/home/circleci/project/src/components/drop-down-filter/DropDownFilter.tsx",lineNumber:209,columnNumber:19},globalThis)]},void 0,!0,{fileName:"/home/circleci/project/src/components/drop-down-filter/DropDownFilter.tsx",lineNumber:151,columnNumber:15},globalThis)]},void 0,!0,{fileName:"/home/circleci/project/src/components/drop-down-filter/DropDownFilter.tsx",lineNumber:145,columnNumber:13},globalThis)}},void 0,!1,{fileName:"/home/circleci/project/src/components/drop-down-filter/DropDownFilter.tsx",lineNumber:65,columnNumber:7},globalThis),o&&D.jsxDEV("div",{className:ee("zep-mt-0.25",{"zep-text-typography-dark-100":!g&&!d},"zep-text-0.875","zep-flex",T),children:[r!=="default"&&D.jsxDEV(ye,{name:r==="error"?"warning-triangle-filled":"info-circle-filled",role:"img",size:24,className:"zep-mr-0.5 zep-shrink-0"},void 0,!1,{fileName:"/home/circleci/project/src/components/drop-down-filter/DropDownFilter.tsx",lineNumber:235,columnNumber:13},globalThis),D.jsxDEV("span",{className:"zep-mt-0.125",children:o},void 0,!1,{fileName:"/home/circleci/project/src/components/drop-down-filter/DropDownFilter.tsx",lineNumber:242,columnNumber:11},globalThis)]},void 0,!0,{fileName:"/home/circleci/project/src/components/drop-down-filter/DropDownFilter.tsx",lineNumber:225,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/home/circleci/project/src/components/drop-down-filter/DropDownFilter.tsx",lineNumber:55,columnNumber:5},globalThis)};try{Ie.displayName="DropDownFilter",Ie.__docgenInfo={description:"",displayName:"DropDownFilter",props:{disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},items:{defaultValue:null,description:"",name:"items",required:!0,type:{name:"DropDownFilterItem[]"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},message:{defaultValue:null,description:"",name:"message",required:!1,type:{name:"string"}},noOptionsLabel:{defaultValue:null,description:"",name:"noOptionsLabel",required:!0,type:{name:"string"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},readOnly:{defaultValue:{value:"false"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}},state:{defaultValue:{value:"default"},description:"",name:"state",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"error"'},{value:'"info"'}]}}}}}catch{}const J=[{id:1,name:"Navigation link"},{id:2,name:"Clickable action"},{id:3,name:"Archive"},{id:4,name:"Here is a really long text that should be truncated"},{id:5,name:"Duplicate"},{id:6,name:"License"},{id:7,name:"Move"},{id:8,name:"Sign out"}],ro={title:"Components/DropDown Filter",component:Ie,tags:["autodocs"],argTypes:{disabled:{control:{type:"boolean"}},readOnly:{control:{type:"boolean"}},label:{control:{type:"text"}},message:{control:{type:"text"}}},decorators:[t=>D.jsxDEV(en,{className:"zep-w-[326px]",children:D.jsxDEV(t,{},void 0,!1,{fileName:"/home/circleci/project/src/components/drop-down-filter/DropDownFilter.stories.tsx",lineNumber:49,columnNumber:11},globalThis)},void 0,!1,{fileName:"/home/circleci/project/src/components/drop-down-filter/DropDownFilter.stories.tsx",lineNumber:48,columnNumber:9},globalThis)]},Ee={args:{disabled:!1,items:J,label:"Dropdown Filter",noOptionsLabel:"Keine Optionen",placeholder:"AuswÃ¤hlen (Hint)",readOnly:!1,state:"default"},play:async({canvasElement:t,step:i})=>{const e=Ye(t),o=e.getByTestId("zep-drop-down-filter-input"),n=e.getByTestId("zep-drop-down-filter-button");await i("Initial checks",async()=>{await Q(o).toBeInTheDocument()}),await i("Select dropDown with keyboard",async()=>{await A.tab(),await Q(o).toHaveFocus()}),await i("Open dropDown options with keyboard",async()=>{await A.keyboard("{arrowdown}"),await i("Check dropDown options",async()=>{J.forEach(s=>{Q(e.getByText(s.name)).toBeInTheDocument()})})}),await i("Select dropDown first option with keyboard",async()=>{await A.keyboard("{arrowdown}"),await A.keyboard("{enter}"),await Q(o).toHaveValue(J[1].name)}),await i("Select dropDown third option with keyboard",async()=>{await A.keyboard("{arrowdown}"),await A.keyboard("{arrowdown}"),await A.keyboard("{arrowdown}"),await A.keyboard("{enter}"),await Q(o).toHaveValue(J[3].name)}),await i("Select dropDown second option with mouse",async()=>{await A.click(n),await A.click(e.getByText(J[2].name)),await Q(o).toHaveValue(J[2].name)}),await i("Slect dropDown third option with mouse",async()=>{await A.click(n),await A.click(e.getByText(J[3].name)),await Q(o).toHaveValue(J[3].name)}),await i("Delete dropDown option with mouse",async()=>{const s=e.getByTestId("zep-drop-down-filter-delete");await Q(s).toBeInTheDocument(),await A.tab(),await Q(o).not.toHaveFocus(),await A.click(s),await Q(o).toHaveValue(""),await A.tab()}),await i("Blur dropDown",async()=>{await A.tab(),await Q(o).not.toHaveFocus()})}},Se={args:{disabled:!1,items:J,label:"Dropdown Filter",noOptionsLabel:"Keine Optionen",placeholder:"AuswÃ¤hlen (Hint)",readOnly:!1,state:"default"},play:async({canvasElement:t})=>{const i=Ye(t);await A.click(i.getByTestId("zep-drop-down-filter-button")),await A.click(i.getByText(J[2].name)),await Q(i.getByTestId("zep-drop-down-filter-input")).toHaveValue(J[2].name)}};var We,qe,Ue;Ee.parameters={...Ee.parameters,docs:{...(We=Ee.parameters)==null?void 0:We.docs,source:{originalSource:`{
  args: {
    disabled: false,
    items,
    label: 'Dropdown Filter',
    noOptionsLabel: 'Keine Optionen',
    placeholder: 'AuswÃ¤hlen (Hint)',
    readOnly: false,
    state: 'default'
  } as DropDownFilterProps,
  play: async ({
    canvasElement,
    step
  }) => {
    const canvas = within(canvasElement);
    const combobox = canvas.getByTestId('zep-drop-down-filter-input');
    const comboboxButton = canvas.getByTestId('zep-drop-down-filter-button');
    await step('Initial checks', async () => {
      await expect(combobox).toBeInTheDocument();
    });
    await step('Select dropDown with keyboard', async () => {
      await userEvent.tab();
      await expect(combobox).toHaveFocus();
    });
    await step('Open dropDown options with keyboard', async () => {
      await userEvent.keyboard('{arrowdown}');
      await step('Check dropDown options', async () => {
        items.forEach(item => {
          expect(canvas.getByText(item.name)).toBeInTheDocument();
        });
      });
    });
    await step('Select dropDown first option with keyboard', async () => {
      await userEvent.keyboard('{arrowdown}');
      await userEvent.keyboard('{enter}');
      await expect(combobox).toHaveValue(items[1].name);
    });
    await step('Select dropDown third option with keyboard', async () => {
      await userEvent.keyboard('{arrowdown}');
      await userEvent.keyboard('{arrowdown}');
      await userEvent.keyboard('{arrowdown}');
      await userEvent.keyboard('{enter}');
      await expect(combobox).toHaveValue(items[3].name);
    });
    await step('Select dropDown second option with mouse', async () => {
      await userEvent.click(comboboxButton);
      await userEvent.click(canvas.getByText(items[2].name));
      await expect(combobox).toHaveValue(items[2].name);
    });
    await step('Slect dropDown third option with mouse', async () => {
      await userEvent.click(comboboxButton);
      await userEvent.click(canvas.getByText(items[3].name));
      await expect(combobox).toHaveValue(items[3].name);
    });
    await step('Delete dropDown option with mouse', async () => {
      const comboboxDeleteButton = canvas.getByTestId('zep-drop-down-filter-delete');
      await expect(comboboxDeleteButton).toBeInTheDocument();
      await userEvent.tab();
      await expect(combobox).not.toHaveFocus();
      await userEvent.click(comboboxDeleteButton);
      await expect(combobox).toHaveValue('');
      await userEvent.tab();
    });
    await step('Blur dropDown', async () => {
      await userEvent.tab();
      await expect(combobox).not.toHaveFocus();
    });
  }
}`,...(Ue=(qe=Ee.parameters)==null?void 0:qe.docs)==null?void 0:Ue.source}}};var Ke,Ge,Xe;Se.parameters={...Se.parameters,docs:{...(Ke=Se.parameters)==null?void 0:Ke.docs,source:{originalSource:`{
  args: {
    disabled: false,
    items,
    label: 'Dropdown Filter',
    noOptionsLabel: 'Keine Optionen',
    placeholder: 'AuswÃ¤hlen (Hint)',
    readOnly: false,
    state: 'default'
  } as DropDownFilterProps,
  play: async ({
    canvasElement
  }) => {
    const canvas = within(canvasElement);

    // See https://storybook.js.org/docs/react/essentials/actions#automatically-matching-args to learn how to setup logging in the Actions panel
    await userEvent.click(canvas.getByTestId('zep-drop-down-filter-button'));
    await userEvent.click(canvas.getByText(items[2].name));
    await expect(canvas.getByTestId('zep-drop-down-filter-input')).toHaveValue(items[2].name);
  }
}`,...(Xe=(Ge=Se.parameters)==null?void 0:Ge.docs)==null?void 0:Xe.source}}};const lo=["Default","SelectAnItem"];export{Ee as Default,Se as SelectAnItem,lo as __namedExportsOrder,ro as default};
