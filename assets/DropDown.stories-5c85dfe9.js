import{r as f,R as c}from"./index-8db94870.js";import{c as $}from"./clsx.m-1229b3e0.js";import{F as Y}from"./Icon-af1412c8.js";import{o as x,S as oe,D as B,y as V,T as Re,u as F,l as G,H as Se,h as Le,a as De,p as K,c as Ee,d as X,e as we,b as Ie,f as Te,R as ke,X as q,I as J,i as de,s as $e,C as Ce,g as Fe,j as Pe,k as ze,m as E,n as R,r as Ne,q as ee,x as Me,t as Ae,v as Be,$ as Ve}from"./transition-729c66c8.js";import{t as qe}from"./tw-merge-b02e8c47.js";import"./_commonjsHelpers-042e6b4d.js";let le=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function ie(e){var a,o;let r=(a=e.innerText)!=null?a:"",l=e.cloneNode(!0);if(!(l instanceof HTMLElement))return r;let i=!1;for(let s of l.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))s.remove(),i=!0;let t=i?(o=l.innerText)!=null?o:"":r;return le.test(t)&&(t=t.replace(le,"")),t}function He(e){let a=e.getAttribute("aria-label");if(typeof a=="string")return a.trim();let o=e.getAttribute("aria-labelledby");if(o){let r=o.split(" ").map(l=>{let i=document.getElementById(l);if(i){let t=i.getAttribute("aria-label");return typeof t=="string"?t.trim():ie(i).trim()}return null}).filter(Boolean);if(r.length>0)return r.join(", ")}return ie(e).trim()}function _e(e){let a=f.useRef(""),o=f.useRef("");return x(()=>{let r=e.current;if(!r)return"";let l=r.innerText;if(a.current===l)return o.current;let i=He(r).trim().toLowerCase();return a.current=l,o.current=i,i})}var Qe=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Qe||{}),Ue=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(Ue||{}),je=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(je||{}),Ge=(e=>(e[e.OpenListbox=0]="OpenListbox",e[e.CloseListbox=1]="CloseListbox",e[e.GoToOption=2]="GoToOption",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterOption=5]="RegisterOption",e[e.UnregisterOption=6]="UnregisterOption",e[e.RegisterLabel=7]="RegisterLabel",e))(Ge||{});function Z(e,a=o=>o){let o=e.activeOptionIndex!==null?e.options[e.activeOptionIndex]:null,r=Ae(a(e.options.slice()),i=>i.dataRef.current.domRef.current),l=o?r.indexOf(o):null;return l===-1&&(l=null),{options:r,activeOptionIndex:l}}let Ke={[1](e){return e.dataRef.current.disabled||e.listboxState===1?e:{...e,activeOptionIndex:null,listboxState:1}},[0](e){if(e.dataRef.current.disabled||e.listboxState===0)return e;let a=e.activeOptionIndex,{isSelected:o}=e.dataRef.current,r=e.options.findIndex(l=>o(l.dataRef.current.value));return r!==-1&&(a=r),{...e,listboxState:0,activeOptionIndex:a}},[2](e,a){var o;if(e.dataRef.current.disabled||e.listboxState===1)return e;let r=Z(e),l=Me(a,{resolveItems:()=>r.options,resolveActiveIndex:()=>r.activeOptionIndex,resolveId:i=>i.id,resolveDisabled:i=>i.dataRef.current.disabled});return{...e,...r,searchQuery:"",activeOptionIndex:l,activationTrigger:(o=a.trigger)!=null?o:1}},[3]:(e,a)=>{if(e.dataRef.current.disabled||e.listboxState===1)return e;let o=e.searchQuery!==""?0:1,r=e.searchQuery+a.value.toLowerCase(),l=(e.activeOptionIndex!==null?e.options.slice(e.activeOptionIndex+o).concat(e.options.slice(0,e.activeOptionIndex+o)):e.options).find(t=>{var s;return!t.dataRef.current.disabled&&((s=t.dataRef.current.textValue)==null?void 0:s.startsWith(r))}),i=l?e.options.indexOf(l):-1;return i===-1||i===e.activeOptionIndex?{...e,searchQuery:r}:{...e,searchQuery:r,activeOptionIndex:i,activationTrigger:1}},[4](e){return e.dataRef.current.disabled||e.listboxState===1||e.searchQuery===""?e:{...e,searchQuery:""}},[5]:(e,a)=>{let o={id:a.id,dataRef:a.dataRef},r=Z(e,l=>[...l,o]);return e.activeOptionIndex===null&&e.dataRef.current.isSelected(a.dataRef.current.value)&&(r.activeOptionIndex=r.options.indexOf(o)),{...e,...r}},[6]:(e,a)=>{let o=Z(e,r=>{let l=r.findIndex(i=>i.id===a.id);return l!==-1&&r.splice(l,1),r});return{...e,...o,activationTrigger:1}},[7]:(e,a)=>({...e,labelId:a.id})},re=f.createContext(null);re.displayName="ListboxActionsContext";function H(e){let a=f.useContext(re);if(a===null){let o=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(o,H),o}return a}let ne=f.createContext(null);ne.displayName="ListboxDataContext";function _(e){let a=f.useContext(ne);if(a===null){let o=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(o,_),o}return a}function Xe(e,a){return F(a.type,Ke,e,a)}let Je=f.Fragment;function We(e,a){let{value:o,defaultValue:r,form:l,name:i,onChange:t,by:s=(u,b)=>u===b,disabled:p=!1,horizontal:y=!1,multiple:h=!1,...S}=e;const w=y?"horizontal":"vertical";let I=V(a),[m=h?[]:void 0,D]=Re(o,t,r),[g,n]=f.useReducer(Xe,{dataRef:f.createRef(),listboxState:1,options:[],searchQuery:"",labelId:null,activeOptionIndex:null,activationTrigger:1}),v=f.useRef({static:!1,hold:!1}),k=f.useRef(null),C=f.useRef(null),P=f.useRef(null),O=x(typeof s=="string"?(u,b)=>{let L=s;return(u==null?void 0:u[L])===(b==null?void 0:b[L])}:s),T=f.useCallback(u=>F(d.mode,{[1]:()=>m.some(b=>O(b,u)),[0]:()=>O(m,u)}),[m]),d=f.useMemo(()=>({...g,value:m,disabled:p,mode:h?1:0,orientation:w,compare:O,isSelected:T,optionsPropsRef:v,labelRef:k,buttonRef:C,optionsRef:P}),[m,p,h,g]);G(()=>{g.dataRef.current=d},[d]),Se([d.buttonRef,d.optionsRef],(u,b)=>{var L;n({type:1}),Le(b,De.Loose)||(u.preventDefault(),(L=d.buttonRef.current)==null||L.focus())},d.listboxState===0);let z=f.useMemo(()=>({open:d.listboxState===0,disabled:p,value:m}),[d,p,m]),N=x(u=>{let b=d.options.find(L=>L.id===u);b&&M(b.dataRef.current.value)}),W=x(()=>{if(d.activeOptionIndex!==null){let{dataRef:u,id:b}=d.options[d.activeOptionIndex];M(u.current.value),n({type:2,focus:E.Specific,id:b})}}),pe=x(()=>n({type:0})),fe=x(()=>n({type:1})),be=x((u,b,L)=>u===E.Specific?n({type:2,focus:E.Specific,id:b,trigger:L}):n({type:2,focus:u,trigger:L})),me=x((u,b)=>(n({type:5,id:u,dataRef:b}),()=>n({type:6,id:u}))),ve=x(u=>(n({type:7,id:u}),()=>n({type:7,id:null}))),M=x(u=>F(d.mode,{[0](){return D==null?void 0:D(u)},[1](){let b=d.value.slice(),L=b.findIndex(U=>O(U,u));return L===-1?b.push(u):b.splice(L,1),D==null?void 0:D(b)}})),xe=x(u=>n({type:3,value:u})),ge=x(()=>n({type:4})),ye=f.useMemo(()=>({onChange:M,registerOption:me,registerLabel:ve,goToOption:be,closeListbox:fe,openListbox:pe,selectActiveOption:W,selectOption:N,search:xe,clearSearch:ge}),[]),he={ref:I},Q=f.useRef(null),Oe=K();return f.useEffect(()=>{Q.current&&r!==void 0&&Oe.addEventListener(Q.current,"reset",()=>{M(r)})},[Q,M]),c.createElement(re.Provider,{value:ye},c.createElement(ne.Provider,{value:d},c.createElement(Ee,{value:F(d.listboxState,{[0]:X.Open,[1]:X.Closed})},i!=null&&m!=null&&we({[i]:m}).map(([u,b],L)=>c.createElement(Ie,{features:Te.Hidden,ref:L===0?U=>{var ae;Q.current=(ae=U==null?void 0:U.closest("form"))!=null?ae:null}:void 0,...ke({key:u,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:l,name:u,value:b})})),q({ourProps:he,theirProps:S,slot:z,defaultTag:Je,name:"Listbox"}))))}let Ye="button";function Ze(e,a){var o;let r=J(),{id:l=`headlessui-listbox-button-${r}`,...i}=e,t=_("Listbox.Button"),s=H("Listbox.Button"),p=V(t.buttonRef,a),y=K(),h=x(g=>{switch(g.key){case R.Space:case R.Enter:case R.ArrowDown:g.preventDefault(),s.openListbox(),y.nextFrame(()=>{t.value||s.goToOption(E.First)});break;case R.ArrowUp:g.preventDefault(),s.openListbox(),y.nextFrame(()=>{t.value||s.goToOption(E.Last)});break}}),S=x(g=>{switch(g.key){case R.Space:g.preventDefault();break}}),w=x(g=>{if(Ne(g.currentTarget))return g.preventDefault();t.listboxState===0?(s.closeListbox(),y.nextFrame(()=>{var n;return(n=t.buttonRef.current)==null?void 0:n.focus({preventScroll:!0})})):(g.preventDefault(),s.openListbox())}),I=de(()=>{if(t.labelId)return[t.labelId,l].join(" ")},[t.labelId,l]),m=f.useMemo(()=>({open:t.listboxState===0,disabled:t.disabled,value:t.value}),[t]),D={ref:p,id:l,type:$e(e,t.buttonRef),"aria-haspopup":"listbox","aria-controls":(o=t.optionsRef.current)==null?void 0:o.id,"aria-expanded":t.disabled?void 0:t.listboxState===0,"aria-labelledby":I,disabled:t.disabled,onKeyDown:h,onKeyUp:S,onClick:w};return q({ourProps:D,theirProps:i,slot:m,defaultTag:Ye,name:"Listbox.Button"})}let et="label";function tt(e,a){let o=J(),{id:r=`headlessui-listbox-label-${o}`,...l}=e,i=_("Listbox.Label"),t=H("Listbox.Label"),s=V(i.labelRef,a);G(()=>t.registerLabel(r),[r]);let p=x(()=>{var h;return(h=i.buttonRef.current)==null?void 0:h.focus({preventScroll:!0})}),y=f.useMemo(()=>({open:i.listboxState===0,disabled:i.disabled}),[i]);return q({ourProps:{ref:s,id:r,onClick:p},theirProps:l,slot:y,defaultTag:et,name:"Listbox.Label"})}let rt="ul",nt=oe.RenderStrategy|oe.Static;function at(e,a){var o;let r=J(),{id:l=`headlessui-listbox-options-${r}`,...i}=e,t=_("Listbox.Options"),s=H("Listbox.Options"),p=V(t.optionsRef,a),y=K(),h=K(),S=Ce(),w=(()=>S!==null?(S&X.Open)===X.Open:t.listboxState===0)();f.useEffect(()=>{var n;let v=t.optionsRef.current;v&&t.listboxState===0&&v!==((n=Fe(v))==null?void 0:n.activeElement)&&v.focus({preventScroll:!0})},[t.listboxState,t.optionsRef]);let I=x(n=>{switch(h.dispose(),n.key){case R.Space:if(t.searchQuery!=="")return n.preventDefault(),n.stopPropagation(),s.search(n.key);case R.Enter:if(n.preventDefault(),n.stopPropagation(),t.activeOptionIndex!==null){let{dataRef:v}=t.options[t.activeOptionIndex];s.onChange(v.current.value)}t.mode===0&&(s.closeListbox(),ee().nextFrame(()=>{var v;return(v=t.buttonRef.current)==null?void 0:v.focus({preventScroll:!0})}));break;case F(t.orientation,{vertical:R.ArrowDown,horizontal:R.ArrowRight}):return n.preventDefault(),n.stopPropagation(),s.goToOption(E.Next);case F(t.orientation,{vertical:R.ArrowUp,horizontal:R.ArrowLeft}):return n.preventDefault(),n.stopPropagation(),s.goToOption(E.Previous);case R.Home:case R.PageUp:return n.preventDefault(),n.stopPropagation(),s.goToOption(E.First);case R.End:case R.PageDown:return n.preventDefault(),n.stopPropagation(),s.goToOption(E.Last);case R.Escape:return n.preventDefault(),n.stopPropagation(),s.closeListbox(),y.nextFrame(()=>{var v;return(v=t.buttonRef.current)==null?void 0:v.focus({preventScroll:!0})});case R.Tab:n.preventDefault(),n.stopPropagation();break;default:n.key.length===1&&(s.search(n.key),h.setTimeout(()=>s.clearSearch(),350));break}}),m=de(()=>{var n,v,k;return(k=(n=t.labelRef.current)==null?void 0:n.id)!=null?k:(v=t.buttonRef.current)==null?void 0:v.id},[t.labelRef.current,t.buttonRef.current]),D=f.useMemo(()=>({open:t.listboxState===0}),[t]),g={"aria-activedescendant":t.activeOptionIndex===null||(o=t.options[t.activeOptionIndex])==null?void 0:o.id,"aria-multiselectable":t.mode===1?!0:void 0,"aria-labelledby":m,"aria-orientation":t.orientation,id:l,onKeyDown:I,role:"listbox",tabIndex:0,ref:p};return q({ourProps:g,theirProps:i,slot:D,defaultTag:rt,features:nt,visible:w,name:"Listbox.Options"})}let ot="li";function lt(e,a){let o=J(),{id:r=`headlessui-listbox-option-${o}`,disabled:l=!1,value:i,...t}=e,s=_("Listbox.Option"),p=H("Listbox.Option"),y=s.activeOptionIndex!==null?s.options[s.activeOptionIndex].id===r:!1,h=s.isSelected(i),S=f.useRef(null),w=_e(S),I=Pe({disabled:l,value:i,domRef:S,get textValue(){return w()}}),m=V(a,S);G(()=>{if(s.listboxState!==0||!y||s.activationTrigger===0)return;let O=ee();return O.requestAnimationFrame(()=>{var T,d;(d=(T=S.current)==null?void 0:T.scrollIntoView)==null||d.call(T,{block:"nearest"})}),O.dispose},[S,y,s.listboxState,s.activationTrigger,s.activeOptionIndex]),G(()=>p.registerOption(r,I),[I,r]);let D=x(O=>{if(l)return O.preventDefault();p.onChange(i),s.mode===0&&(p.closeListbox(),ee().nextFrame(()=>{var T;return(T=s.buttonRef.current)==null?void 0:T.focus({preventScroll:!0})}))}),g=x(()=>{if(l)return p.goToOption(E.Nothing);p.goToOption(E.Specific,r)}),n=ze(),v=x(O=>n.update(O)),k=x(O=>{n.wasMoved(O)&&(l||y||p.goToOption(E.Specific,r,0))}),C=x(O=>{n.wasMoved(O)&&(l||y&&p.goToOption(E.Nothing))}),P=f.useMemo(()=>({active:y,selected:h,disabled:l}),[y,h,l]);return q({ourProps:{id:r,ref:m,role:"option",tabIndex:l===!0?void 0:-1,"aria-disabled":l===!0?!0:void 0,"aria-selected":h,disabled:void 0,onClick:D,onFocus:g,onPointerEnter:v,onMouseEnter:v,onPointerMove:k,onMouseMove:k,onPointerLeave:C,onMouseLeave:C},theirProps:t,slot:P,defaultTag:ot,name:"Listbox.Option"})}let it=B(We),st=B(Ze),ut=B(tt),ct=B(at),dt=B(lt),A=Object.assign(it,{Button:st,Label:ut,Options:ct,Option:dt});const pt=268,te=({disabled:e=!1,items:a,message:o,label:r,placeholder:l,readonly:i=!1,state:t="default",...s})=>{const[p,y]=c.useState(),h=c.useRef(null),S=c.useRef(null),w=t==="error",I=w?"text-zep-error":t==="info"?"text-zep-info":"text-zep-typography-dark-100",m=e||i;return c.createElement("div",{className:qe($("relative","inline-block","text-left"),s.className),"data-testid":"zep-drop-down"},c.createElement(A,{disabled:m,value:p,onChange:y},({open:D})=>{const n=Be(S.current)<pt,v=(p==null?void 0:p.name)??l,k=e?"text-zep-typography-dark-70/40":!(p!=null&&p.name)&&!i?"text-zep-typography-dark-70/70":"text-zep-typography-dark-1ß0/1ß0",C=$("inline-flex","justify-between","rounded","border-solid","pl-4","pr-3","py-3","zep-body-text","w-[326px]","outline-none",w?"border-2":"border",k,i?"bg-gray-100":"bg-white",{ring:D},{"border-zep-typography-dark-70":!e&&!w},{"border-zep-typography-dark-70/40":e},{"border-zep-error":w},{"active:ring":!m},{"ring-offset-1":!m},{"focus-visible:ring":!m},{"ring-zep-focus":!m},{"cursor-not-allowed":m}),P=$("zep-drop-down-menu","absolute","right-0","z-10","py-1",n?"mb-[-25px]":"mt-1","w-[326px]","max-h-[268px]","origin-top-right","rounded-md","bg-white","drop-shadow-md","ring-1,","ring-black","ring-opacity-5","focus:outline-none","overflow-hidden","overflow-y-auto",{"bottom-full":n}),O=$(m?"text-zep-typography-dark-70/40":"text-zep-typography-dark-70/100","transition-transform","duration-500","shrink-0",{"rotate-180":D}),T=(d,z)=>$("px-4 py-3 text-md zep-body-text flex w-full justify-between items-center",d?"bg-gray-100 text-gray-900":"text-zep-typography-dark-70",{"bg-gray-200":z},{"pr-12":z});return c.createElement(c.Fragment,null,r&&c.createElement(A.Label,{className:$("block","mb-zep-0.5",{"text-zep-typography-dark-70/40":e})},r),c.createElement(A.Button,{className:C,ref:S,title:v,"data-testid":"zep-drop-down-button"},c.createElement(c.Fragment,null,c.createElement("span",{className:"truncate"},v),c.createElement(Y,{className:O,name:"ChevronMiniDown",role:"img",size:24}))),c.createElement(Ve,{as:f.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-25",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95"},c.createElement(A.Options,{className:P,ref:h,"data-testid":"zep-drop-down-menu"},a.map((d,z)=>c.createElement(A.Option,{key:d.id,value:d,title:d.name,className:({active:N,selected:W})=>T(N,W)},({selected:N})=>c.createElement(c.Fragment,null,c.createElement("span",{className:"truncate"},d.name),N&&c.createElement(Y,{name:"Check",role:"img",size:24,className:"text-zep-green-50 absolute right-4"})))))))}),o&&c.createElement("div",{className:$("mt-[6px]","zep-tagline","flex",I)},t!=="default"&&c.createElement(Y,{name:"Info",role:"img",size:24,className:"mr-2"}),c.createElement("span",null,o)))};try{te.displayName="DropDown",te.__docgenInfo={description:"",displayName:"DropDown",props:{disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},items:{defaultValue:null,description:"",name:"items",required:!0,type:{name:"DropDownItem[]"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},message:{defaultValue:null,description:"",name:"message",required:!1,type:{name:"string"}},readonly:{defaultValue:{value:"false"},description:"",name:"readonly",required:!1,type:{name:"boolean"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!0,type:{name:"string"}},state:{defaultValue:{value:"default"},description:"",name:"state",required:!1,type:{name:"enum",value:[{value:'"error"'},{value:'"info"'},{value:'"default"'}]}}}}}catch{}const ft=[{id:1,name:"Navigation link"},{id:2,name:"Clickable action"},{id:3,name:"Archive"},{id:4,name:"Here is a really long text that should be truncated"},{id:5,name:"Duplicate"},{id:6,name:"License"},{id:7,name:"Move"},{id:8,name:"Sign out"}],ht={title:"Components/DropDown Select",component:te,tags:["autodocs"],argTypes:{disabled:{control:{type:"boolean"}},label:{control:{type:"text"}},message:{control:{type:"text"}},readonly:{control:{type:"boolean"}}},decorators:[e=>c.createElement("div",{style:{height:350}},c.createElement(e,null))]},j={args:{disabled:!1,readonly:!1,items:ft,label:"Dropdown",className:"foo",state:"default",placeholder:"Auswählen (Hint)"}};var se,ue,ce;j.parameters={...j.parameters,docs:{...(se=j.parameters)==null?void 0:se.docs,source:{originalSource:`{
  args: ({
    disabled: false,
    readonly: false,
    items,
    label: 'Dropdown',
    className: 'foo',
    state: 'default',
    placeholder: 'Auswählen (Hint)'
  } as DropDownProps)
}`,...(ce=(ue=j.parameters)==null?void 0:ue.docs)==null?void 0:ce.source}}};const Ot=["Default"];export{j as Default,Ot as __namedExportsOrder,ht as default};
//# sourceMappingURL=DropDown.stories-5c85dfe9.js.map
